<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OW2 ë©€í‹° í‹°ì–´ë©”ì´ì»¤</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --ow-orange: #f99e1a;
            --bg-dark: #080a0e;
            --panel: #1a1e26;
            --tier-s: #ff7f7f; --tier-a: #ffbf7f; --tier-b: #ffff7f; --tier-c: #7fff7f; --tier-d: #7fbfff;
        }

        body {
            background: var(--bg-dark); color: white; font-family: 'Malgun Gothic', sans-serif;
            margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center;
            overflow-x: hidden; touch-action: manipulation;
        }

        /* ìƒë‹¨ í—¤ë” ë° ì œëª© */
        header { width: 100%; max-width: 1000px; margin: 10px 0 20px 0; text-align: center; }
        header h1 { color: var(--ow-orange); font-style: italic; text-transform: uppercase; letter-spacing: -1px; margin: 0; }
        header p { color: #888; margin: 5px 0; font-size: 0.9rem; }

        /* í¬ì§€ì…˜ íƒ­ ìŠ¤íƒ€ì¼ */
        .tab-container { display: flex; width: 100%; max-width: 1000px; gap: 5px; margin-bottom: 15px; }
        .tab-btn {
            flex: 1; padding: 12px; border: none; background: #222; color: #777;
            cursor: pointer; font-weight: bold; font-size: 1rem; transition: 0.3s;
            clip-path: polygon(5% 0, 100% 0, 95% 100%, 0% 100%);
        }
        .tab-btn.active { background: var(--ow-orange); color: black; }

        /* í‹°ì–´í‘œ êµ¬ì—­ (ìº¡ì²˜ ëŒ€ìƒ) */
        .capture-area { width: 100%; max-width: 1000px; padding: 15px; background: var(--bg-dark); min-height: 450px; }
        .tier-page { display: none; }
        .tier-page.active { display: block; }
        
        .tier-board { display: flex; flex-direction: column; gap: 8px; }
        .tier-row { display: flex; background: var(--panel); border-radius: 4px; position: relative; min-height: 85px; border: 1px solid #333; }
        
        .tier-label {
            width: 70px; min-width: 70px; display: flex; align-items: center; justify-content: center;
            font-size: 1.6rem; font-weight: 900; color: #000; clip-path: polygon(0 0, 100% 0, 85% 100%, 0% 100%);
        }

        .row-remove {
            position: absolute; left: -35px; top: 50%; transform: translateY(-50%);
            color: #666; cursor: pointer; border: none; background: none; font-size: 24px; padding: 5px;
        }

        .dropzone { flex-grow: 1; display: flex; flex-wrap: wrap; padding: 10px; gap: 8px; min-height: 60px; }

        /* ì˜ì›… ì¹´ë“œ */
        .hero {
            width: 55px; height: 70px; background: #2a2f3b; border: 2px solid #4a5162;
            cursor: grab; position: relative; background-size: cover; background-position: center;
            user-select: none; touch-action: none; z-index: 10;
        }
        .hero span { position: absolute; bottom: 0; font-size: 8px; background: rgba(0,0,0,0.8); width: 100%; text-align: center; pointer-events: none; }
        
        /* í‹°ì–´í‘œì— ìˆì„ ë•Œë§Œ ì‚­ì œ ë²„íŠ¼ */
        .del-btn {
            position: absolute; top: -10px; right: -10px; width: 22px; height: 22px;
            background: #ff4e50; color: white; border-radius: 50%; display: none;
            align-items: center; justify-content: center; font-size: 14px; border: 2px solid white; z-index: 20;
        }
        .tier-row .hero.selected .del-btn { display: flex; }
        .hero.dragging { opacity: 0.7; transform: scale(1.1); z-index: 9999 !important; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }

        /* í•˜ë‹¨ ë¡œìŠ¤í„° êµ¬ì—­ */
        .roster-container { width: 100%; max-width: 1000px; margin-top: 10px; background: rgba(255,255,255,0.03); padding: 15px; border-radius: 8px; }
        .pool-content { display: none; flex-wrap: wrap; gap: 8px; justify-content: center; }
        .pool-content.active { display: flex; }

        /* ì»¨íŠ¸ë¡¤ */
        .controls { width: 100%; max-width: 1000px; margin: 15px 0; display: flex; gap: 5px; flex-wrap: wrap; }
        .input-group { flex: 1; display: flex; gap: 5px; min-width: 250px; }
        .btn-save { background: var(--ow-orange); color: black; border: none; padding: 12px; cursor: pointer; border-radius: 4px; font-weight: bold; flex: 1; }

        @media (max-width: 600px) { .row-remove { left: -5px; color: white; text-shadow: 0 0 3px black; z-index: 30; } }
    </style>
</head>
<body>

    <header>
        <h1>OVERWATCH 2 TIER LIST</h1>
        <p>í¬ì§€ì…˜ë³„ë¡œ ë‚˜ë§Œì˜ í‹°ì–´ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”</p>
    </header>

    <div class="tab-container">
        <button class="tab-btn active" onclick="switchTab('tank')">ğŸ›¡ï¸ ëŒê²©</button>
        <button class="tab-btn" onclick="switchTab('damage')">âš”ï¸ ê³µê²©</button>
        <button class="tab-btn" onclick="switchTab('support')">ğŸ’‰ ì§€ì›</button>
    </div>

    <div id="capture-zone" class="capture-area">
        <h2 id="capture-title" style="margin: 0 0 15px 0; text-align: center; color: var(--ow-orange);">ëŒê²©(TANK) í‹°ì–´í‘œ</h2>
        
        <div id="board-tank" class="tier-page active">
            <div class="tier-board">
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-s)">S</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-a)">A</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-b)">B</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-c)">C</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-d)">D</div><div class="dropzone"></div></div>
            </div>
        </div>

        <div id="board-damage" class="tier-page">
            <div class="tier-board">
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-s)">S</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-a)">A</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-b)">B</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-c)">C</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-d)">D</div><div class="dropzone"></div></div>
            </div>
        </div>

        <div id="board-support" class="tier-page">
            <div class="tier-board">
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-s)">S</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-a)">A</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-b)">B</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-c)">C</div><div class="dropzone"></div></div>
                <div class="tier-row"><button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:var(--tier-d)">D</div><div class="dropzone"></div></div>
            </div>
        </div>
    </div>

    <div class="controls">
        <div class="input-group">
            <input type="text" id="new-tier-name" placeholder="í‹°ì–´ëª…" style="width:60px; padding:10px;">
            <input type="color" id="new-tier-color" value="#666666" style="width:40px; height:43px; border:none;">
            <button onclick="createNewTier()" style="flex:1;">í‹°ì–´ ì¶”ê°€</button>
        </div>
        <button class="btn-save" onclick="downloadImage()">í˜„ì¬ í‹°ì–´í‘œ ì´ë¯¸ì§€ë¡œ ì €ì¥</button>
    </div>

    <div class="roster-container">
        <div id="pool-tank" class="pool-content active dropzone"></div>
        <div id="pool-damage" class="pool-content dropzone"></div>
        <div id="pool-support" class="pool-content dropzone"></div>
    </div>

<script>
    const IMG_BASE_URL = "images/";
    const heroData = {
        tank: [{id:'dva', name:'D.Va'}, {id:'doomfist', name:'ë‘ í”¼'}, {id:'junkerqueen', name:'ì •ì»¤í€¸'}, {id:'orisa', name:'ì˜¤ë¦¬ì‚¬'}, {id:'ramattra', name:'ë¼ë§ˆíŠ¸ë¼'}, {id:'reinhardt', name:'ë¼ì¸'}, {id:'roadhog', name:'ë¡œë“œ'}, {id:'sigma', name:'ì‹œê·¸ë§ˆ'}, {id:'winston', name:'ìœˆìŠ¤í„´'}, {id:'wreckingball', name:'ë ˆí‚¹ë³¼'}, {id:'zarya', name:'ìë¦¬ì•¼'}, {id:'mauga', name:'ë§ˆìš°ê°€'}],
        damage: [{id:'ashe', name:'ì• ì‰¬'}, {id:'bastion', name:'ë°”ìŠ¤í‹°ì˜¨'}, {id:'cassidy', name:'ìºì‹œë””'}, {id:'echo', name:'ì—ì½”'}, {id:'genji', name:'ê²ì§€'}, {id:'hanzo', name:'í•œì¡°'}, {id:'junkrat', name:'ì •í¬ë«'}, {id:'mei', name:'ë©”ì´'}, {id:'pharah', name:'íŒŒë¼'}, {id:'reaper', name:'ë¦¬í¼'}, {id:'sojourn', name:'ì†Œì „'}, {id:'soldier76', name:'ì†”ì €'}, {id:'sombra', name:'ì†œë¸Œë¼'}, {id:'symmetra', name:'ì‹œë©”'}, {id:'torbjorn', name:'í† ë¹„'}, {id:'tracer', name:'íŠ¸ë ˆ'}, {id:'widowmaker', name:'ìœ„ë„'}, {id:'venture', name:'ë²¤ì²˜'}],
        support: [{id:'ana', name:'ì•„ë‚˜'}, {id:'baptiste', name:'ë°”í‹°'}, {id:'brigitte', name:'ë¸Œë¦¬'}, {id:'illari', name:'ì¼ë¦¬ì•„ë¦¬'}, {id:'kiriko', name:'í‚¤ë¦¬ì½”'}, {id:'lifeweaver', name:'ë¼ìœ„'}, {id:'lucio', name:'ë£¨ì‹œìš°'}, {id:'mercy', name:'ë©”ë¥´ì‹œ'}, {id:'moira', name:'ëª¨ì´ë¼'}, {id:'zenyatta', name:'ì  ì•¼íƒ€'}, {id:'juno', name:'ìœ ë…¸'}]
    };

    let activeItem = null;
    let currentRole = 'tank';

    function init() {
        Object.keys(heroData).forEach(role => {
            const pool = document.getElementById(`pool-${role}`);
            heroData[role].forEach(h => {
                const div = document.createElement('div');
                div.className = 'hero';
                div.style.backgroundImage = `url('${IMG_BASE_URL}${h.id}.png')`;
                div.dataset.role = role;
                div.innerHTML = `<span>${h.name}</span><div class="del-btn" onclick="removeHero(event, this)">Ã—</div>`;
                
                div.addEventListener('click', (e) => {
                    e.stopPropagation();
                    document.querySelectorAll('.hero').forEach(el => el.classList.remove('selected'));
                    div.classList.add('selected');
                });

                div.addEventListener('touchstart', onTouchStart, {passive: false});
                div.addEventListener('touchmove', onTouchMove, {passive: false});
                div.addEventListener('touchend', onTouchEnd, {passive: false});
                pool.appendChild(div);
            });
        });
        document.querySelectorAll('.dropzone').forEach(setupDropzone);
    }

    function switchTab(role) {
        currentRole = role;
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.currentTarget.classList.add('active');

        document.querySelectorAll('.tier-page').forEach(pg => pg.classList.remove('active'));
        document.getElementById(`board-${role}`).classList.add('active');

        document.querySelectorAll('.pool-content').forEach(p => p.classList.remove('active'));
        document.getElementById(`pool-${role}`).classList.add('active');

        const titleMap = { tank: 'ëŒê²©(TANK) í‹°ì–´í‘œ', damage: 'ê³µê²©(DAMAGE) í‹°ì–´í‘œ', support: 'ì§€ì›(SUPPORT) í‹°ì–´í‘œ' };
        document.getElementById('capture-title').innerText = titleMap[role];
    }

    // ëª¨ë°”ì¼ í„°ì¹˜ ë“œë˜ê·¸ ë¡œì§
    function onTouchStart(e) {
        activeItem = this;
        activeItem.classList.add('dragging');
    }

    function onTouchMove(e) {
        if (!activeItem) return;
        e.preventDefault();
        const touch = e.touches[0];
        activeItem.style.position = 'fixed';
        activeItem.style.left = (touch.clientX - 25) + 'px';
        activeItem.style.top = (touch.clientY - 35) + 'px';
    }

    function onTouchEnd(e) {
        if (!activeItem) return;
        activeItem.classList.remove('dragging');
        activeItem.style.position = 'static';
        const touch = e.changedTouches[0];
        const dropTarget = document.elementFromPoint(touch.clientX, touch.clientY);
        const zone = dropTarget?.closest('.dropzone');
        if (zone) zone.appendChild(activeItem);
        activeItem = null;
    }

    function setupDropzone(zone) {
        zone.addEventListener('dragover', e => e.preventDefault());
        zone.addEventListener('drop', () => { if(activeItem) zone.appendChild(activeItem); });
    }

    function removeHero(e, btn) {
        e.stopPropagation();
        const hero = btn.parentElement;
        document.getElementById(`pool-${hero.dataset.role}`).appendChild(hero);
        hero.classList.remove('selected');
    }

    function removeRow(btn) {
        const row = btn.parentElement;
        row.querySelectorAll('.hero').forEach(h => document.getElementById(`pool-${h.dataset.role}`).appendChild(h));
        row.remove();
    }

    function createNewTier() {
        const name = document.getElementById('new-tier-name').value || "N";
        const color = document.getElementById('new-tier-color').value;
        const activeBoard = document.querySelector('.tier-page.active .tier-board');
        const row = document.createElement('div');
        row.className = 'tier-row';
        row.innerHTML = `<button class="row-remove" onclick="removeRow(this)">Ã—</button><div class="tier-label" style="background:${color}">${name}</div><div class="dropzone"></div>`;
        activeBoard.appendChild(row);
        setupDropzone(row.querySelector('.dropzone'));
    }

    function downloadImage() {
        document.querySelectorAll('.hero').forEach(h => h.classList.remove('selected'));
        const target = document.getElementById('capture-zone');
        html2canvas(target, {backgroundColor:'#080a0e', useCORS: true}).then(canvas => {
            const link = document.createElement('a');
            link.download = `ow2-${currentRole}-tier.png`;
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    init();
    document.addEventListener('click', () => {
        document.querySelectorAll('.hero').forEach(h => h.classList.remove('selected'));
    });
</script>
</body>
</html>
