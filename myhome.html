<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì•„ì´ì†Œë©”íŠ¸ë¦­ ë£¸ ì •ë°€ ë³´ì • ë²„ì „</title>
    <style>
        :root { --accent: #ff9c00; --bg: #111; }
        body { background: var(--bg); color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        
        /* ìƒì  UI */
        .shop { background: #222; padding: 15px; border-radius: 12px; display: flex; gap: 10px; margin-bottom: 20px; border: 1px solid #333; }
        .shop-item { width: 50px; height: 50px; cursor: pointer; border: 1px solid #444; padding: 5px; background: #000; border-radius: 5px; transition: 0.2s; }
        .shop-item:hover { transform: scale(1.1); border-color: var(--accent); }

        /* ë£¸ ì»¨í…Œì´ë„ˆ */
        .room-viewport {
            position: relative;
            width: 500px;
            height: 500px;
            background: #000;
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid #333;
        }

        /* ì™¼ìª½ ë²½ */
        .wall-left {
            position: absolute;
            width: 250px; height: 300px;
            background: #2a2a2a;
            top: 50px; left: 0;
            transform: skewY(26.5deg); /* ì•„ì´ì†Œë©”íŠ¸ë¦­ í‘œì¤€ ê°ë„ */
            transform-origin: right bottom;
            border-right: 2px solid #111;
        }

        /* ì˜¤ë¥¸ìª½ ë²½ */
        .wall-right {
            position: absolute;
            width: 250px; height: 300px;
            background: #333;
            top: 50px; right: 0;
            transform: skewY(-26.5deg);
            transform-origin: left bottom;
        }

        /* ë°”ë‹¥ (ë§ˆë¦„ëª¨) */
        .floor {
            position: absolute;
            width: 500px; height: 250px;
            background: #1e1e1e;
            bottom: 25px; /* ë²½ ëì— ë”± ë¶™ë„ë¡ ì¡°ì • */
            left: 0;
            /* ë°”ë‹¥ì„ ë§ˆë¦„ëª¨ë¡œ ë§Œë“œëŠ” ê³µì‹ */
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            background-image: repeating-linear-gradient(45deg, #252525 0, #252525 1px, transparent 0, transparent 40px),
                              repeating-linear-gradient(-45deg, #252525 0, #252525 1px, transparent 0, transparent 40px);
        }

        /* ì•„ì´í…œ */
        .placed-item {
            position: absolute;
            width: 80px;
            cursor: move;
            z-index: 100;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.5));
            user-select: none;
            touch-action: none;
        }
    </style>
</head>
<body>

    <h2 style="color:var(--accent);">ğŸ“ ìš”ì›ì‹¤ ë°°ì¹˜ (ì¢Œí‘œ ë³´ì • ì™„ë£Œ)</h2>

    <div class="shop">
        <img src="https://cdn-icons-png.flaticon.com/512/963/963864.png" class="shop-item" onclick="addItem(this.src)" title="PC">
        <img src="https://cdn-icons-png.flaticon.com/512/3016/3016832.png" class="shop-item" onclick="addItem(this.src)" title="ì†ŒíŒŒ">
        <img src="https://cdn-icons-png.flaticon.com/512/2311/2311453.png" class="shop-item" onclick="addItem(this.src)" title="í…Œì´ë¸”">
        <img src="https://cdn-icons-png.flaticon.com/512/1674/1674291.png" class="shop-item" onclick="addItem(this.src)" title="ìš”ì›">
    </div>

    <div class="room-viewport" id="room">
        <div class="wall-left"></div>
        <div class="wall-right"></div>
        <div class="floor"></div>
        </div>

    <script>
        const room = document.getElementById('room');
        const SNAP = 10; 

        function addItem(src) {
            const img = document.createElement('img');
            img.src = src;
            img.className = 'placed-item';
            // ì´ˆê¸° ìœ„ì¹˜ë¥¼ ì •ì¤‘ì•™(ë°”ë‹¥ ìœ„)ìœ¼ë¡œ ì„¤ì •
            img.style.left = '210px';
            img.style.top = '250px';

            img.onmousedown = (e) => startDrag(e, img);
            img.ontouchstart = (e) => startDrag(e, img);
            img.ondblclick = () => img.remove();

            room.appendChild(img);
        }

        function startDrag(e, el) {
            e.preventDefault();
            const isTouch = e.type === 'touchstart';
            let startX = isTouch ? e.touches[0].clientX : e.clientX;
            let startY = isTouch ? e.touches[0].clientY : e.clientY;
            let initX = el.offsetLeft;
            let initY = el.offsetTop;

            function onMove(me) {
                const curX = isTouch ? me.touches[0].clientX : me.clientX;
                const curY = isTouch ? me.touches[0].clientY : me.clientY;
                
                let nextX = Math.round((initX + (curX - startX)) / SNAP) * SNAP;
                let nextY = Math.round((initY + (curY - startY)) / SNAP) * SNAP;

                const rect = room.getBoundingClientRect();
                nextX = Math.max(0, Math.min(nextX, rect.width - el.width));
                nextY = Math.max(0, Math.min(nextY, rect.height - el.height));

                el.style.left = nextX + 'px';
                el.style.top = nextY + 'px';
                
                // Yì¢Œí‘œ ê¸°ì¤€ìœ¼ë¡œ ë ˆì´ì–´ ìˆœì„œ(ê¹Šì´ê°) ë³€ê²½
                el.style.zIndex = Math.floor(nextY + el.height);
            }

            function onEnd() {
                document.removeEventListener(isTouch ? 'touchmove' : 'mousemove', onMove);
                document.removeEventListener(isTouch ? 'touchend' : 'mouseup', onEnd);
            }

            document.addEventListener(isTouch ? 'touchmove' : 'mousemove', onMove);
            document.addEventListener(isTouch ? 'touchend' : 'mouseup', onEnd);
        }
    </script>
</body>
</html>
