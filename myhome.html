<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì•ˆì •ì ì¸ ë§ˆì´í™ˆ ë°°ì¹˜ í…ŒìŠ¤íŠ¸</title>
    <style>
        :root { --accent: #ff9c00; --bg: #1a1a1a; }
        body { background: #111; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        
        /* ìƒì  UI */
        .shop { background: #222; padding: 15px; border-radius: 12px; display: flex; gap: 10px; margin-bottom: 20px; border: 1px solid #333; }
        .shop-item { width: 50px; height: 50px; cursor: pointer; border: 1px solid #444; padding: 5px; background: #000; border-radius: 5px; }

        /* ë£¸ ì»¨í…Œì´ë„ˆ (ì‹œê°ì  ì•„ì´ì†Œë©”íŠ¸ë¦­) */
        .room-container {
            position: relative;
            width: 500px;
            height: 400px;
            background: #252525;
            border: 2px solid #444;
            overflow: hidden;
            border-radius: 10px;
        }

        /* ì…ì²´ ë²½ë©´ í‘œí˜„ (CSSë¡œ ê·¸ë¦¼) */
        .wall-left {
            position: absolute;
            width: 50%; height: 70%;
            background: #333;
            transform: skewY(26deg);
            border-right: 2px solid #111;
            top: 0; left: 0;
        }
        .wall-right {
            position: absolute;
            width: 50%; height: 70%;
            background: #3d3d3d;
            transform: skewY(-26deg);
            top: 0; right: 0;
        }
        .floor {
            position: absolute;
            width: 100%; height: 50%;
            background: #222;
            bottom: 0;
            /* ë°”ë‹¥ ê²©ì */
            background-image: 
                linear-gradient(30deg, #2a2a2a 12%, transparent 12.5%, transparent 87%, #2a2a2a 87.5%, #2a2a2a),
                linear-gradient(150deg, #2a2a2a 12%, transparent 12.5%, transparent 87%, #2a2a2a 87.5%, #2a2a2a),
                linear-gradient(30deg, #2a2a2a 12%, transparent 12.5%, transparent 87%, #2a2a2a 87.5%, #2a2a2a),
                linear-gradient(150deg, #2a2a2a 12%, transparent 12.5%, transparent 87%, #2a2a2a 87.5%, #2a2a2a),
                linear-gradient(60deg, #333 25%, transparent 25.5%, transparent 75%, #333 75%, #333),
                linear-gradient(60deg, #333 25%, transparent 25.5%, transparent 75%, #333 75%, #333);
            background-size: 80px 46px;
        }

        /* ë°°ì¹˜ëœ ì•„ì´í…œ */
        .placed-item {
            position: absolute;
            width: 70px;
            cursor: move;
            z-index: 10;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5));
            user-select: none;
            touch-action: none;
        }
    </style>
</head>
<body>

    <h2 style="color:var(--accent);">ğŸ  ìš”ì›ì‹¤ ê¾¸ë¯¸ê¸° (ì•ˆì •í™” ë²„ì „)</h2>

    <div class="shop">
        <img src="https://cdn-icons-png.flaticon.com/512/963/963864.png" class="shop-item" onclick="addItem(this.src)">
        <img src="https://cdn-icons-png.flaticon.com/512/3016/3016832.png" class="shop-item" onclick="addItem(this.src)">
        <img src="https://cdn-icons-png.flaticon.com/512/2311/2311453.png" class="shop-item" onclick="addItem(this.src)">
        <img src="https://cdn-icons-png.flaticon.com/512/1674/1674291.png" class="shop-item" onclick="addItem(this.src)">
    </div>

    <div class="room-container" id="room">
        <div class="floor"></div>
        <div class="wall-left"></div>
        <div class="wall-right"></div>
        </div>

    <p style="font-size: 12px; color:#888; margin-top:10px;">ë“œë˜ê·¸í•´ì„œ ë°°ì¹˜í•˜ê³  ë”ë¸” í´ë¦­í•´ì„œ ì‚­ì œí•˜ì„¸ìš”.</p>

    <script>
        const room = document.getElementById('room');
        const SNAP = 20; // ìŠ¤ëƒ… ë‹¨ìœ„

        function addItem(src) {
            const img = document.createElement('img');
            img.src = src;
            img.className = 'placed-item';
            img.style.left = '215px';
            img.style.top = '150px';

            // ë“œë˜ê·¸ ì´ë²¤íŠ¸
            img.onmousedown = (e) => startDrag(e, img);
            img.ontouchstart = (e) => startDrag(e, img);
            
            // ì‚­ì œ
            img.ondblclick = () => img.remove();

            room.appendChild(img);
        }

        function startDrag(e, el) {
            e.preventDefault();
            
            const isTouch = e.type === 'touchstart';
            let startX = isTouch ? e.touches[0].clientX : e.clientX;
            let startY = isTouch ? e.touches[0].clientY : e.clientY;
            
            let initialX = el.offsetLeft;
            let initialY = el.offsetTop;

            function onMove(me) {
                const curX = isTouch ? me.touches[0].clientX : me.clientX;
                const curY = isTouch ? me.touches[0].clientY : me.clientY;

                let dx = curX - startX;
                let dy = curY - startY;

                // ğŸ“Œ ê·¸ë¦¬ë“œ ìŠ¤ëƒ… ì ìš©
                let nextX = Math.round((initialX + dx) / SNAP) * SNAP;
                let nextY = Math.round((initialY + dy) / SNAP) * SNAP;

                // ìº”ë²„ìŠ¤ ê²½ê³„ ì œí•œ
                const rect = room.getBoundingClientRect();
                nextX = Math.max(0, Math.min(nextX, rect.width - el.width));
                nextY = Math.max(0, Math.min(nextY, rect.height - el.height));

                el.style.left = nextX + 'px';
                el.style.top = nextY + 'px';
                
                // ğŸ“Œ ê¹Šì´ê°(Z-index) ì²˜ë¦¬: ì•„ë˜ìª½ì— ìˆì„ìˆ˜ë¡ ì•ìœ¼ë¡œ ì˜¤ê²Œ í•¨
                el.style.zIndex = nextY + el.height;
            }

            function onEnd() {
                document.removeEventListener(isTouch ? 'touchmove' : 'mousemove', onMove);
                document.removeEventListener(isTouch ? 'touchend' : 'mouseup', onEnd);
            }

            document.addEventListener(isTouch ? 'touchmove' : 'mousemove', onMove);
            document.addEventListener(isTouch ? 'touchend' : 'mouseup', onEnd);
        }
    </script>
</body>
</html>
