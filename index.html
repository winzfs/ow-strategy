<!DOCTYPE html>
<html lang="ko">
<head>
     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ì˜¤ë²„ì›Œì¹˜ í—ˆë¸Œ - ì˜µì¹˜ ê°™ì´ í•˜ì‹¤ë¶„ êµ¬í•´ìš”! ê·¸ë£¹ì°¾ê¸°/íŒŒí‹°ë§¤ì¹­ ì»¤ë®¤ë‹ˆí‹°! </title>
    
     <meta name="google-site-verification" content="7OvWXc4oEGF5-Aub2pEWiCaBatEsSzA4Im454PrJ0kM" />
     <meta name="theme-color" content="#ff9c00">

     <meta name="keywords" content="ì˜¤ë²„ì›Œì¹˜ íŒŒí‹°ì°¾ê¸°, ì˜¤ë²„ì›Œì¹˜2 ê·¸ë£¹ì°¾ê¸°, ì˜¤ë²„ì›Œì¹˜ ì»¤ë®¤ë‹ˆí‹°, ì˜¤ë²„ì›Œì¹˜ ë“€ì˜¤, ì˜¤ë²„ì›Œì¹˜ í‹°ì–´ë³„ ë§¤ì¹­, í‹°ì–´ë©”ì´ì»¤, owhub">
     <meta name="description" content="ì˜¤ë²„ì›Œì¹˜2 íŒ€ì›ì„ ê°€ì¥ ë¹ ë¥´ê²Œ ì°¾ëŠ” ì‹¤ì‹œê°„ íŒŒí‹° ë§¤ì¹­ ì„œë¹„ìŠ¤! íƒ±ì»¤, ë”œëŸ¬, ì§€ì› í¬ì§€ì…˜ë³„ ê·¸ë£¹ì°¾ê¸°, ë§¤ë„ˆ ë³„ì  ì‹œìŠ¤í…œìœ¼ë¡œ í´ë¦°í•œ íŒ€ ë³´ì´ìŠ¤ ê²Œì„ì„ ì¦ê¸°ì„¸ìš”.">


     <meta name="robots" content="index, follow">
    
    <meta property="og:title" content="Overwatch Hub - íŒŒí‹° ë§¤ì¹­ ì„œë¹„ìŠ¤">
    <meta property="og:description" content="ì§€ê¸ˆ ë°”ë¡œ ì‹¤ë ¥ì— ë§ëŠ” íŒ€ì›ì„ ì°¾ê³  ì—°ìŠ¹ì„ ì‹œì‘í•˜ì„¸ìš”!">
    <meta property="og:url" content="https://owhub.vercel.app">
     <meta property="og:image" content="https://owhub.vercel.app/og.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="1200">


    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Overwatch Hub",
      "operatingSystem": "WEB",
      "applicationCategory": "GameApplication",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "150"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "KRW"
      }
    }
    </script>
     
    <style>

         /* ëª¨ë“  ìš”ì†Œì˜ í…Œë‘ë¦¬ ì„  ì¼ê´„ ì‚­ì œ */
*, *::before, *::after {
    border: none !important;
    outline: none !important;
    box-sizing: border-box;
}

        :root { --accent: #ff9c00; --tank: #00a2ff; --dps: #ff3c3c; --sup: #00ff7b; --bg-dark: #111; }
        body { background: var(--bg-dark); color: white; font-family: 'Pretendard', sans-serif; margin: 0; padding-bottom: 50px; }
        
        /* ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ - í–„ë²„ê±° ë©”ë‰´ë§Œ */
        nav { 
            background: #000; 
            padding: 10px 15px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid #333; 
            position: sticky; 
            top: 0; 
            z-index: 100; 
            height: 50px;
        }

        /* ê¸°ì¡´ .nav-logo ìˆ˜ì • ë° ì¶”ê°€ */
/* ìƒë‹¨ ë„¤ë¹„ ë¡œê³  ì»¨í…Œì´ë„ˆ */
.nav-logo-container {
    display: flex;
    align-items: center;
    height: 100%; /* ë„¤ë¹„ê²Œì´ì…˜ ë†’ì´ì— ë§ì¶¤ */
    cursor: pointer;
}

/* ë¡œê³  ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
.nav-logo-img {
    height: 32px; /* ìƒë‹¨ ë°” ë†’ì´(50px)ì— ë§ì¶° 32~35pxê°€ ê°€ì¥ ì ë‹¹í•©ë‹ˆë‹¤ */
    width: auto;  /* ë¹„ìœ¨ ìœ ì§€ */
    object-fit: contain;
    display: block;
}




        /* í–„ë²„ê±° ë©”ë‰´ ì•„ì´ì½˜ */
        .hamburger {
            display: flex;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            padding: 5px;
            z-index: 1001;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: var(--accent);
            border-radius: 2px;
            transition: 0.3s;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(7px, 7px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        /* ì‚¬ì´ë“œë°” ì˜¤ë²„ë ˆì´ */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* ì‚¬ì´ë“œë°” ë©”ë‰´ */
        /* ì‚¬ì´ë“œë°” ë³¸ì²´ë§Œ ì´ ì½”ë“œë¡œ ìˆ˜ì •í•˜ì„¸ìš” */
.sidebar {
    position: fixed;
    top: 85px;          /* 1. ìƒë‹¨ ë°” ì•„ë˜ë¡œ ì ë‹¹íˆ ë„ì›€ */
    left: -280px;       /* ë‹«í˜”ì„ ë•Œ ìœ„ì¹˜ */
    width: 240px;
    height: auto;       /* 2. í•µì‹¬: ë©”ë‰´ ê°œìˆ˜ë§Œí¼ë§Œ ë†’ì´ ì°¨ì§€ (ë°”ë‹¥ê¹Œì§€ ì•ˆ ë‚´ë ¤ì˜´) */
    max-height: 70vh;   /* 3. ë©”ë‰´ê°€ ë„ˆë¬´ ë§ì•„ì§€ë©´ í™”ë©´ 70%ê¹Œì§€ë§Œ ì»¤ì§ */
    background: #252525;
    z-index: 1000;
    transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* 4. í”Œë¡œíŒ… ë””ìì¸: ë‘¥ê·¼ ëª¨ì„œë¦¬ì™€ ì™¼ìª½ ë²½ì—ì„œ ë„ì›€ */
    border-radius: 20px !important;
    margin-left: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    
    padding: 10px 0;
    overflow: hidden;   /* ë‘¥ê·¼ ëª¨ì„œë¦¬ ë°–ìœ¼ë¡œ ë‚´ìš© ì•ˆ ë‚˜ê°€ê²Œ */
    border: none !important;
}

/* ì‚¬ì´ë“œë°”ê°€ ì—´ë ¸ì„ ë•Œ ìœ„ì¹˜ */
.sidebar.active {
    left: 0;
}


        .sidebar-header {
            padding: 20px 15px;
            border-bottom: 1px solid #333;
            background: linear-gradient(135deg, #1a1a1a 0%, #000 100%);
        }

        .sidebar-header h2 {
            margin: 0;
            color: var(--accent);
            font-size: 20px;
            font-weight: 900;
        }

        .sidebar-menu {
            padding: 10px 0;
        }

        .sidebar-menu-item {
    padding: 12px 20px;
    color: #888;
    font-weight: 600;
    font-size: 15px;
    cursor: pointer;
    transition: 0.2s;
    display: flex;
    align-items: center;
    justify-content: space-between;

    /* [ì¶”ê°€] ë‘¥ê·¼ ì‚¬ê°í˜• í•˜ì´ë¼ì´íŠ¸ë¥¼ ìœ„í•´ ì–‘ì˜†ì— ì—¬ë°±ì„ ì¤Œ */
    margin: 4px 12px;
    border-radius: 12px;
    border-left: none !important; /* ê¸°ì¡´ì˜ ì™¼ìª½ ì„  ì œê±° */
}

        .sidebar-menu-item:hover, 
.sidebar-menu-item.active {
    background: var(--accent) !important; /* ì˜¤ë Œì§€ìƒ‰ ë°°ê²½ */
    color: #000 !important;              /* ê¸€ììƒ‰ì„ ê²€ì •ìœ¼ë¡œ ë³€ê²½ */
}

        .sidebar-menu-item.active {
            color: var(--accent);
            background: #1a1a1a;
            border-left-color: var(--accent);
        }

        /* ë©”ë‰´ ì•ˆì— ìˆëŠ” ë§í¬ ê¸€ììƒ‰ ì²˜ë¦¬ */
.sidebar-menu-item a {
    color: inherit;
    text-decoration: none;
    display: block;
    width: 100%;
}

        /* ë¡œê·¸ì¸ ì˜ì—­ì„ ì‚¬ì´ë“œë°” ì•ˆìœ¼ë¡œ */
        .sidebar-auth {
            padding: 15px;
            border-top: 1px solid #333;
            margin-top: 10px;
        }

        .sidebar-auth input {
            margin-bottom: 8px;
            font-size: 13px;
            padding: 10px;
        }

        .sidebar-auth button {
            width: 100%;
            margin-top: 5px;
        }

        .menu-new { 
            background: #ff3c3c; 
            color: white; 
            font-size: 10px; 
            padding: 2px 6px; 
            border-radius: 10px; 
            font-weight: 900; 
            animation: blink 1.2s infinite;
        }
        
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        
        .container { max-width: 800px; margin: 30px auto; padding: 0 15px; }
        .page { display: none; }
        .page.active { display: block; }
        .box { background: #323232; padding: 20px; border-radius: 12px; margin-bottom: 15px; }
        .btn-main { background: var(--accent); color: black; border: none; padding: 12px; border-radius: 8px; font-weight: 700; cursor: pointer; width: 100%; margin-top: 10px; }
        .btn-sub { background: #333; color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 12px; transition: 0.2s; }
        .btn-danger { background: #ff3c3c; color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 12px; }
        input, select, textarea { background: #252525; border: 1px solid #333; color: white; padding: 10px; border-radius: 8px; width: 100%; box-sizing: border-box; margin-bottom: 8px; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; }
        .stars { color: #444; font-size: 24px; cursor: pointer; text-align: center; margin: 10px 0; }
        .stars span.active { color: var(--accent); }
        .pos-group { border: 1px solid #333; padding: 12px; border-radius: 10px; margin-bottom: 10px; background: #1e1e1e; }
        .badge-item {
    height: 32px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 10px !important;
    border-radius: 6px !important;
    font-size: 11px !important;
    font-weight: 800 !important;
    line-height: 1 !important;
    box-sizing: border-box !important;
    margin-right: 5px !important;
    white-space: nowrap !important;
}

/* í‹°ì–´ ë±ƒì§€: í‹°ì–´ ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ í¬í•¨ */
.badge-tier {
    background: #2a2a2a !important;
    color: #bbb !important;
    border: 1px solid #333 !important;
}

/* ì¸ì›ìˆ˜ ë±ƒì§€: í˜„ì¬ ì¸ì› / ìµœëŒ€ ì¸ì› */
.badge-count {
    background: #2a2a2a !important;
    color: #bbb !important;
    border: 1px solid #333 !important;
}

/* í¬ì§€ì…˜ ë±ƒì§€ (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ë³´ì™„) */
.badge-tank { background: var(--tank) !important; color: white !important; }
.badge-dps { background: var(--dps) !important; color: white !important; }
.badge-sup { background: var(--sup) !important; color: black !important; }
        /* [ìˆ˜ì •ë³¸] ê²€ìƒ‰ í•„í„° ì „ì²´ ë°•ìŠ¤ */
.filter-container { 
    background: linear-gradient(145deg, #161b22, #0d1117) !important; /* ë‚¨ìƒ‰ ê³„ì—´ ê·¸ë¼ë°ì´ì…˜ */
    padding: 20px !important; 
    border-radius: 20px !important; /* ë°•ìŠ¤ ë‘¥ê¸€ê²Œ */
    margin-bottom: 20px; 
    border: 1px solid #30363d !important; /* ì€ì€í•œ ë‚¨ìƒ‰ í…Œë‘ë¦¬ */
    box-shadow: 0 8px 24px rgba(0,0,0,0.5); /* ì…ì²´ê° */
}

/* ê²€ìƒ‰ ì œëª© ì˜ì—­ */
#search-title-area { 
    margin-bottom: 18px; 
    padding-left: 12px; 
    border-left: 4px solid var(--accent) !important; 
    border-bottom: none !important; /* ê¸°ì¡´ ì„  ì œê±° */
}

/* í•„í„° íƒœê·¸ë“¤ (ë²„íŠ¼) */
.filter-tag {
    height: 34px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0 16px;
    border-radius: 10px !important; /* íƒœê·¸ë„ ì™„ì „ ë‘¥ê¸€ê²Œ */
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    background: #21262d; /* ë¯¸ì„¸í•œ ë‚¨ìƒ‰ì¡° íšŒìƒ‰ */
    color: #c9d1d9;
    border: 1px solid #30363d;
    transition: all 0.2s;
    margin-bottom: 8px;
    margin-right: 4px;
}

/* í•„í„° í™œì„±í™”(í´ë¦­) ì‹œ */
.filter-tag.active {
    background: var(--accent) !important;
    color: #000 !important;
    border-color: #fff !important;
    box-shadow: 0 0 15px rgba(255, 156, 0, 0.4) !important;
    transform: translateY(-2px); /* ëª¨ë°”ì¼ì—ì„œë„ ì‚´ì§ ë“¤ë¦¬ëŠ” íš¨ê³¼ */
}

/* êµ¬ë¶„ì„  */
.filter-divider {
    height: 1px;
    background: #30363d;
    margin: 15px 0;
}


        
         /* ê¸°ì¡´ style íƒœê·¸ ë§ˆì§€ë§‰ì— ì¶”ê°€ */
.pos-badge-inline {
    cursor:pointer; 
    display:inline-flex; 
    align-items:center; 
    padding:4px 10px; 
    border-radius:6px; 
    font-size:13px; 
    font-weight:800; 
    color:white; 
    border:1px solid rgba(0,0,0,0.1);
}
.pos-badge-sup {
    color: black !important;
}
.pos-badge-inline img {
    width:16px; 
    height:16px; 
    margin-right:5px;
}

         
    </style>
</head>
<body>
    <h1 style="display:none;">ì˜¤ë²„ì›Œì¹˜ í—ˆë¸Œ - ì‹¤ì‹œê°„ ê·¸ë£¹ì°¾ê¸°/íŒŒí‹° ë§¤ì¹­ ì»¤ë®¤ë‹ˆí‹°</h1>
     
    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (í–„ë²„ê±° ë©”ë‰´ë§Œ) -->
    
<nav>
    <div class="hamburger" id="hamburger-btn" onclick="toggleSidebar()" style="position: relative; z-index: 1001;">
        <span></span>
        <span></span>
        <span></span>
        <span id="nav-new-badge" style="display:none; position: absolute; top: -3px; right: -3px; width: 10px; height: 10px; background: #ff3c3c; border-radius: 50%; border: 2px solid #000; z-index: 1002;"></span>
    </div>

    <div class="nav-logo-container" onclick="location.href='index.html'">
    <img src="img/logo.jpg" alt="OW HUB" class="nav-logo-img">
</div>

    
    <div style="width: 35px;"></div>
</nav>




    <!-- ë””ë²„ê·¸ ì½˜ì†” (ëª¨ë°”ì¼ìš© - ìë™ í‘œì‹œ) -->
    <div id="debug-console" style="position: fixed; bottom: 0; left: 0; right: 0; background: #000; color: #0f0; font-family: monospace; font-size: 10px; padding: 10px; max-height: 150px; overflow-y: auto; z-index: 9999; border-top: 2px solid #0f0; display: block;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
            <strong>ğŸ› DEBUG CONSOLE</strong>
            <button onclick="document.getElementById('debug-console').style.display='none'" style="background: #f00; color: white; border: none; padding: 2px 8px; border-radius: 3px; font-size: 10px;">ë‹«ê¸°</button>
        </div>
        <div id="debug-output"></div>
    </div>
    <button onclick="document.getElementById('debug-console').style.display='block'" style="position: fixed; bottom: 10px; right: 10px; background: #0f0; color: #000; border: none; padding: 10px; border-radius: 50%; font-weight: bold; z-index: 9998; font-size: 12px; width: 50px; height: 50px;">ğŸ›</button>

    <!-- ì‚¬ì´ë“œë°” ì˜¤ë²„ë ˆì´ -->
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>

    <!-- ì‚¬ì´ë“œë°” ë©”ë‰´ -->
    <div class="sidebar">
        <div class="sidebar-header" style="display: none;">
    <h2>âš”ï¸ MENU</h2>
    <div id="sidebar-user-tag">
        <span id="display-btag"></span>
    </div>
</div>


        
        <div class="sidebar-menu">
            <div class="sidebar-menu-item active" data-page="list" id="sidebar-list" onclick="showPageAndClose('list')">
                íŒŒí‹°ì°¾ê¸°
            </div>
            <div class="sidebar-menu-item" data-page="profile" id="sidebar-profile" onclick="showPageAndClose('profile')">
                ë‚´ ì •ë³´
            </div>
            <div class="sidebar-menu-item" data-page="noti" id="sidebar-noti" onclick="showPageAndClose('noti')">
                <span>ì•Œë¦¼</span>
                <span id="sidebar-new-tag" class="menu-new" style="display:none;">N</span>
            </div>
            <div class="sidebar-menu-item">
                <a href="commu.html">ì»¤ë®¤ë‹ˆí‹°</a>
            </div>
            <div class="sidebar-menu-item">
                <a href="tiermaker.html">í‹°ì–´ë©”ì´ì»¤</a>
            </div>
        </div>

        <!-- ë¡œê·¸ì¸ ì˜ì—­ -->
        <div class="sidebar-auth">
            <div id="login-form-sidebar">
                <input type="email" id="login-email" placeholder="ì´ë©”ì¼">
                <input type="password" id="login-password" placeholder="ë¹„ë°€ë²ˆí˜¸">
                <button id="btn-login" class="btn-main">ë¡œê·¸ì¸ / ê°€ì…</button>
                <button onclick="forgotPassword()" class="btn-sub" style="width:100%; margin-top:5px;">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</button>
            </div>
            <div id="user-info-sidebar" style="display:none; text-align:center;">
                <p style="color: var(--accent); font-weight: bold; margin: 0 0 10px 0;">ì ‘ì† ì¤‘</p>
                <button id="btn-logout" class="btn-danger" style="width:100%;">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </div>

    <!-- ì‹¤ì‹œê°„ ìƒíƒœë°” -->
    <div id="live-status-bar" style="background: linear-gradient(90deg, #000 0%, #1a1a1a 50%, #000 100%); border-bottom: 1px solid #333; padding: 0 15px; font-size: 11px; color: #aaa; display: flex; align-items: center; justify-content: space-between; letter-spacing: 0.5px; height: 34px; font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;">
    <div style="display: flex; align-items: center; gap: 8px; line-height: 1;">
        <span style="display: flex; align-items: center; justify-content: center; width: 8px; height: 8px; position: relative;">
            <span style="position: absolute; display: inline-flex; width: 100%; height: 100%; background: #00ff7b; border-radius: 50%; opacity: 0.75; animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;"></span>
            <span style="position: relative; display: inline-flex; border-radius: 50%; width: 8px; height: 8px; background: #00ff7b;"></span>
        </span>
        <span id="live-user-count" style="font-weight: 600; text-shadow: 0 0 5px rgba(0,255,123,0.3);">--ëª… ì ‘ì† ì¤‘</span>
    </div>

    <div id="live-party-count" style="color: #aaa; font-weight: 600; font-size: 11px; line-height: 1; display: flex; align-items: center; font-family: inherit;">
        ëª¨ì§‘ ì¤‘ì¸ íŒŒí‹°: 0
    </div>
</div>



    <style>
    @keyframes ping {
        75%, 100% { transform: scale(2.5); opacity: 0; }
    }
    </style>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container">
        <div id="page-list" class="page active">
            <div class="box" style="margin-bottom: 20px; background-color: #323232 !important;"> 
                <h4 style="margin:0; color:var(--accent);">ğŸš€ íŒŒí‹° ëª¨ì§‘ ì‹œì‘</h4>
                <div style="margin-top:10px;">
                    <input type="text" id="post-btag" placeholder="ë°°í‹€íƒœê·¸#1234">
                    <div style="display:flex; gap:5px;">
                        <select id="post-main-pos">
                            <option value="íƒ±ì»¤">ğŸ›¡ï¸ íƒ±ì»¤</option>
                            <option value="ë”œëŸ¬">âš”ï¸ ë”œëŸ¬</option>
                            <option value="ì§€ì›">ğŸ’‰ ì§€ì›</option>
                        </select>
                        <select id="post-tier">
                            <option value="ë°°ì¹˜">ë°°ì¹˜</option>
                            <option value="ë¸Œë¡ ì¦ˆ">ë¸Œë¡ ì¦ˆ</option>
                            <option value="ì‹¤ë²„">ì‹¤ë²„</option>
                            <option value="ê³¨ë“œ">ê³¨ë“œ</option>
                            <option value="í”Œë˜í‹°ë„˜">í”Œë˜í‹°ë„˜</option>
                            <option value="ë‹¤ì´ì•„ëª¬ë“œ">ë‹¤ì´ì•„ëª¬ë“œ</option>
                            <option value="ë§ˆìŠ¤í„°">ë§ˆìŠ¤í„°</option>
                            <option value="ê·¸ëœë“œë§ˆìŠ¤í„°">ê·¸ëœë“œë§ˆìŠ¤í„°</option>
                            <option value="ì±”í”¼ì–¸">ì±”í”¼ì–¸</option>
                        </select>
                        <select id="post-tier-num">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5" selected>5</option>
                        </select>
                    </div>
                    <select id="post-maxp" style="margin-top:8px;">
                        <option value="2">2ì¸ íŒŒí‹°</option>
                        <option value="3">3ì¸ íŒŒí‹°</option>
                        <option value="4">4ì¸ íŒŒí‹°</option>
                        <option value="5" selected>5ì¸ íŒŒí‹°</option>
                    </select>
                </div>
                <textarea id="post-desc" placeholder="ëª¨ì§‘ ë‚´ìš© (ëª¨ìŠ¤íŠ¸, ë§ˆì´í¬ ìœ ë¬´ ë“±)" rows="2"></textarea>
                <button class="btn-main" id="btn-post">ëª¨ì§‘ ì‹œì‘</button>
            </div>

            <div class="filter-container" style="padding: 15px; background: #111;">
                <div id="search-title-area">
                    <h3 id="search-title" style="margin:0; font-size: 16px; color: #eee;">ê²€ìƒ‰ í•„í„°</h3>
                    <small id="search-desc" style="color: #666; font-size: 11px;">í¬ì§€ì…˜ê³¼ í‹°ì–´ë¥¼ ì—¬ëŸ¬ ê°œ ì„ íƒí•´ì„œ ê²€ìƒ‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
                </div>
                
                <div id="filter-pos-group" style="display:flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; padding-bottom: 10px; border-bottom: 1px solid #222;">
                    <span onclick="toggleFilter('pos', 'íƒ±ì»¤', this)" class="badge filter-tag" style="background:var(--tank); padding: 5px 10px;">
                        <img src="./img/tank.png" style="width:22px; height:22px; margin-right:4px; vertical-align:middle;">íƒ±ì»¤
                    </span>
                    <span onclick="toggleFilter('pos', 'ë”œëŸ¬', this)" class="badge filter-tag" style="background:var(--dps); padding: 5px 10px;">
                        <img src="./img/dps.png" style="width:22px; height:22px; margin-right:4px; vertical-align:middle;">ë”œëŸ¬
                    </span>
                    <span onclick="toggleFilter('pos', 'ì§€ì›', this)" class="badge filter-tag" style="background:var(--sup); color:black; padding: 5px 10px;">
                        <img src="./img/sup.png" style="width:22px; height:22px; margin-right:4px; vertical-align:middle;">ì§€ì›
                    </span>
                </div>

                <div id="filter-tier-group" style="display:flex; flex-wrap: wrap; gap: 6px; margin-top: 10px;">
                    <span onclick="toggleFilter('tier', 'ë°°ì¹˜', this)" class="badge filter-tag" style="background:#444; padding: 4px 8px;">ë°°ì¹˜</span>
                    <span onclick="toggleFilter('tier', 'ë¸Œë¡ ì¦ˆ', this)" class="badge filter-tag" style="background:#8b4513; padding: 4px 8px;">ë¸Œë¡ ì¦ˆ</span>
                    <span onclick="toggleFilter('tier', 'ì‹¤ë²„', this)" class="badge filter-tag" style="background:#c0c0c0; color:black; padding: 4px 8px;">ì‹¤ë²„</span>
                    <span onclick="toggleFilter('tier', 'ê³¨ë“œ', this)" class="badge filter-tag" style="background:#cd7f32; padding: 4px 8px;">ê³¨ë“œ</span>
                    <span onclick="toggleFilter('tier', 'í”Œë˜í‹°ë„˜', this)" class="badge filter-tag" style="background:#e5e4e2; color:black; padding: 4px 8px;">í”Œë˜í‹°ë„˜</span>
                    <span onclick="toggleFilter('tier', 'ë‹¤ì´ì•„ëª¬ë“œ', this)" class="badge filter-tag" style="background:#b9f2ff; color:black; padding: 4px 8px;">ë‹¤ì´ì•„</span>
                    <span onclick="toggleFilter('tier', 'ë§ˆìŠ¤í„°', this)" class="badge filter-tag" style="background:#ffdb58; color:black; padding: 4px 8px;">ë§ˆìŠ¤í„°</span>
                    <span onclick="toggleFilter('tier', 'ê·¸ëœë“œë§ˆìŠ¤í„°', this)" class="badge filter-tag" style="background:#ffffff; color:black; padding: 4px 8px;">ê·¸ë§ˆ</span>
                    <span onclick="toggleFilter('tier', 'ì±”í”¼ì–¸', this)" class="badge filter-tag" style="background:linear-gradient(45deg, #ff00ff, #00ffff); color:black; padding: 4px 8px; font-weight:900;">ì±”í”¼ì–¸</span>
                    
                    <button onclick="resetFilter()" class="btn-sub" style="padding: 4px 10px; font-size: 10px; background: #222; margin-left: auto;">ì´ˆê¸°í™” â†º</button>
                </div>
            </div>

            <div id="party-list"></div>
        </div>

        <div id="page-profile" class="page">
            <div class="box">
                <h3>ë‚´ í”„ë¡œí•„</h3>
                <div id="avg-rating-area" style="text-align: center; margin-bottom: 20px; padding: 15px; background: #222; border-radius: 12px; border: 1px solid #333; display: none;">
                    <span style="color: #888; font-size: 12px; display: block; margin-bottom: 5px;">ë‚´ í‰ê·  ë§¤ë„ˆ ë³„ì </span>
                    <div id="profile-avg-stars" style="color: var(--accent); font-size: 24px; font-weight: bold;"></div>
                </div>
                <input type="text" id="profile-btag" placeholder="ë°°í‹€íƒœê·¸#1234">
                <div class="pos-group"><label style="color:var(--tank);">ğŸ›¡ï¸ ëŒê²©</label><div style="display:flex; gap:5px;"><select id="tier-tank"><option value="ë°°ì¹˜">ë°°ì¹˜</option><option value="ë¸Œë¡ ì¦ˆ">ë¸Œë¡ ì¦ˆ</option><option value="ì‹¤ë²„">ì‹¤ë²„</option><option value="ê³¨ë“œ">ê³¨ë“œ</option><option value="í”Œë˜í‹°ë„˜">í”Œë˜í‹°ë„˜</option><option value="ë‹¤ì´ì•„ëª¬ë“œ">ë‹¤ì´ì•„ëª¬ë“œ</option><option value="ë§ˆìŠ¤í„°">ë§ˆìŠ¤í„°</option><option value="ê·¸ëœë“œë§ˆìŠ¤í„°">ê·¸ëœë“œë§ˆìŠ¤í„°</option><option value="ì±”í”¼ì–¸">ì±”í”¼ì–¸</option></select><select id="num-tank"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select></div></div>
                <div class="pos-group"><label style="color:var(--dps);">âš”ï¸ ê³µê²©</label><div style="display:flex; gap:5px;"><select id="tier-dps"><option value="ë°°ì¹˜">ë°°ì¹˜</option><option value="ë¸Œë¡ ì¦ˆ">ë¸Œë¡ ì¦ˆ</option><option value="ì‹¤ë²„">ì‹¤ë²„</option><option value="ê³¨ë“œ">ê³¨ë“œ</option><option value="í”Œë˜í‹°ë„˜">í”Œë˜í‹°ë„˜</option><option value="ë‹¤ì´ì•„ëª¬ë“œ">ë‹¤ì´ì•„ëª¬ë“œ</option><option value="ë§ˆìŠ¤í„°">ë§ˆìŠ¤í„°</option><option value="ê·¸ëœë“œë§ˆìŠ¤í„°">ê·¸ëœë“œë§ˆìŠ¤í„°</option><option value="ì±”í”¼ì–¸">ì±”í”¼ì–¸</option></select><select id="num-dps"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select></div></div>
                <div class="pos-group"><label style="color:var(--sup);">ğŸ’‰ ì§€ì›</label><div style="display:flex; gap:5px;"><select id="tier-sup"><option value="ë°°ì¹˜">ë°°ì¹˜</option><option value="ë¸Œë¡ ì¦ˆ">ë¸Œë¡ ì¦ˆ</option><option value="ì‹¤ë²„">ì‹¤ë²„</option><option value="ê³¨ë“œ">ê³¨ë“œ</option><option value="í”Œë˜í‹°ë„˜">í”Œë˜í‹°ë„˜</option><option value="ë‹¤ì´ì•„ëª¬ë“œ">ë‹¤ì´ì•„ëª¬ë“œ</option><option value="ë§ˆìŠ¤í„°">ë§ˆìŠ¤í„°</option><option value="ê·¸ëœë“œë§ˆìŠ¤í„°">ê·¸ëœë“œë§ˆìŠ¤í„°</option><option value="ì±”í”¼ì–¸">ì±”í”¼ì–¸</option></select><select id="num-sup"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select></div></div>
                <button class="btn-main" id="btn-save-profile">ì •ë³´ ì €ì¥</button>
            </div>
        </div>

        <div id="page-noti" class="page">
            <h3>ğŸ“« ì•Œë¦¼ ì„¼í„°</h3>
            <div id="noti-list"></div>
            <hr style="border: 0; border-top: 1px dashed #333; margin: 20px 0;">
            <div id="group-eval-list"></div>
        </div>
    </div>

    <!-- ëª¨ë‹¬ë“¤ -->
    <div class="modal-overlay" id="request-modal">
        <div class="modal-content" style="background:#222; padding:20px; border-radius:15px; width:300px;">
            <h3>íŒŒí‹° ì‹ ì²­</h3>
            <label style="font-size:11px; color:#888;">í¬ì§€ì…˜ ë° ì„¸ë¶€ í‹°ì–´</label>
            <div style="display:flex; gap:5px;">
                <select id="request-pos"><option value="íƒ±ì»¤">ğŸ›¡ï¸ íƒ±ì»¤</option><option value="ë”œëŸ¬">âš”ï¸ ë”œëŸ¬</option><option value="ì§€ì›">ğŸ’‰ ì§€ì›</option></select>
                <select id="request-tier">
                    <option value="ë°°ì¹˜">ë°°ì¹˜</option>
                    <option value="ë¸Œë¡ ì¦ˆ">ë¸Œë¡ ì¦ˆ</option>
                    <option value="ì‹¤ë²„">ì‹¤ë²„</option>
                    <option value="ê³¨ë“œ">ê³¨ë“œ</option>
                    <option value="í”Œë˜í‹°ë„˜">í”Œë˜í‹°ë„˜</option>
                    <option value="ë‹¤ì´ì•„ëª¬ë“œ">ë‹¤ì´ì•„ëª¬ë“œ</option>
                    <option value="ë§ˆìŠ¤í„°">ë§ˆìŠ¤í„°</option>
                    <option value="ê·¸ëœë“œë§ˆìŠ¤í„°">ê·¸ëœë“œë§ˆìŠ¤í„°</option>
                    <option value="ì±”í”¼ì–¸">ì±”í”¼ì–¸</option>
                </select>
                <select id="request-tier-num"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select>
            </div>
            <input type="text" id="request-btag" placeholder="ë‚´ ë°°í‹€íƒœê·¸#1234">
            <textarea id="request-msg" placeholder="ìƒëŒ€ì—ê²Œ ë³´ë‚¼ ë©”ì‹œì§€" rows="3"></textarea>
            <button class="btn-main" id="btn-confirm-send">ì‹ ì²­í•˜ê¸°</button>
            <button class="btn-sub" onclick="closeModal()" style="width:100%; margin-top:5px;">ì·¨ì†Œ</button>
        </div>
    </div>

    <div class="modal-overlay" id="rate-modal">
        <div class="modal-content" style="background:#222; padding:20px; border-radius:15px; width:300px; text-align:center;">
            <h3>íŒ€ì› í‰ê°€</h3>
            <div class="stars" id="rate-stars"><span data-v="1">â˜…</span><span data-v="2">â˜…</span><span data-v="3">â˜…</span><span data-v="4">â˜…</span><span data-v="5">â˜…</span></div>
            <button class="btn-main" id="btn-confirm-rate">í‰ê°€ ì™„ë£Œ</button>
            <button class="btn-sub" onclick="closeModal()" style="width:100%; margin-top:5px;">ì·¨ì†Œ</button>
        </div>
    </div>

<section class="container" style="margin-top: 50px; margin-bottom: 30px;">
    <details style="background: #1a1a1a; border-radius: 12px; border: 1px solid #333; overflow: hidden; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.3);">
        <summary style="padding: 18px; color: var(--accent); font-size: 15px; font-weight: bold; cursor: pointer; list-style: none; display: flex; justify-content: space-between; align-items: center; background: #222;">
            <span>ğŸ’¡ ì˜¤ë²„ì›Œì¹˜ í—ˆë¸Œ ì´ìš© ê°€ì´ë“œ (FAQ)</span>
            <span style="font-size: 12px; color: #666; transition: 0.3s;"> â–¼</span>
        </summary>
        
        <div style="padding: 10px 20px 25px 20px; background: #151515;">
            <div style="margin-top: 15px; padding-bottom: 15px; border-bottom: 1px solid #222;">
                <strong style="display: block; color: #fff; margin-bottom: 8px; font-size: 14px;">â“ ì–´ë–»ê²Œ í•˜ë©´ íŒŒí‹°ë¥¼ ë¹¨ë¦¬ êµ¬í•  ìˆ˜ ìˆë‚˜ìš”?</strong>
                <p style="margin: 0; color: #888; font-size: 13px; line-height: 1.6;">
                    ê°€ì¥ ë¹ ë¥¸ ë°©ë²•ì€ ë³¸ì¸ì˜ <strong>ë°°í‹€íƒœê·¸ì™€ í‹°ì–´(ë¸Œë¡ ì¦ˆ~ì±”í”¼ì–¸)</strong>ë¥¼ ì •í™•íˆ ì…ë ¥í•˜ê³  'ëª¨ì§‘ ë“±ë¡'ì„ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. íŠ¹íˆ ëª¨ì§‘ ë‚´ìš©ì— ë³¸ì¸ì˜ í”Œë ˆì´ ìŠ¤íƒ€ì¼ì„ êµ¬ì²´ì ìœ¼ë¡œ ì ìœ¼ë©´ ì„±í–¥ì´ ë§ëŠ” íŒ€ì›ì„ í›¨ì”¬ ë¹ ë¥´ê²Œ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div style="margin-top: 15px; padding-bottom: 15px; border-bottom: 1px solid #222;">
                <strong style="display: block; color: #fff; margin-bottom: 8px; font-size: 14px;">âš”ï¸ í¬ì§€ì…˜ ì„ íƒì€ ê²Œì„ ë‚´ ì—­í• êµ°ê³¼ ë™ì¼í•œê°€ìš”?</strong>
                <p style="margin: 0; color: #888; font-size: 13px; line-height: 1.6;">
                    ë„¤, ì˜¤ë²„ì›Œì¹˜2ì˜ ê³µì‹ ì—­í• êµ°ì¸ <strong>ëŒê²©(Tank), ê³µê²©(Damage), ì§€ì›(Support)</strong> ì•„ì´ì½˜ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ë³¸ì¸ì´ ì£¼ë ¥ìœ¼ë¡œ í”Œë ˆì´í•˜ëŠ” í¬ì§€ì…˜ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.
                </p>
            </div>

            <div style="margin-top: 15px; padding-bottom: 15px; border-bottom: 1px solid #222;">
                <strong style="display: block; color: #fff; margin-bottom: 8px; font-size: 14px;">â­ ë§¤ë„ˆ ë³„ì ì€ ë¬´ì—‡ì¸ê°€ìš”?</strong>
                <p style="margin: 0; color: #888; font-size: 13px; line-height: 1.6;">
                    í•¨ê»˜ ê·¸ë£¹ í”Œë ˆì´ë¥¼ ë§ˆì¹œ í›„ ìƒëŒ€ë°©ì—ê²Œ <strong>ë§¤ë„ˆ í‰ê°€(1~5ì )</strong>ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë†’ì€ ë³„ì ì„ ìœ ì§€í•˜ëŠ” ìœ ì €ëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ìš”ì›ìœ¼ë¡œ ê°„ì£¼ë˜ì–´ íŒŒí‹° ë§¤ì¹­ ì„±ê³µë¥ ì´ ì˜¬ë¼ê°‘ë‹ˆë‹¤.
                </p>
            </div>

            <div style="margin-top: 15px; padding-bottom: 15px; border-bottom: 1px solid #222;">
                <strong style="display: block; color: #fff; margin-bottom: 8px; font-size: 14px;">ğŸ† í‹°ì–´ ì •ë³´ê°€ ì‹¤ì œì™€ ë‹¤ë¥´ë©´ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</strong>
                <p style="margin: 0; color: #888; font-size: 13px; line-height: 1.6;">
                    í˜„ì¬ ìœ ì € ììœ¨ ì…ë ¥ì„ ì›ì¹™ìœ¼ë¡œ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ê³ ì˜ì ì¸ <strong>í—ˆìœ„ í‹°ì–´ ê¸°ì¬</strong>ëŠ” ë‹¤ë¥¸ íŒ€ì›ì—ê²Œ í”¼í•´ë¥¼ ì£¼ë©°, ë§¤ë„ˆ ë³„ì  í•˜ë½ì˜ ì›ì¸ì´ ë  ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
                </p>
            </div>

            <div style="margin-top: 15px;">
                <strong style="display: block; color: #fff; margin-bottom: 8px; font-size: 14px;">ğŸš¨ ë¹„ë§¤ë„ˆ ìœ ì €ë‚˜ í•µ ì‚¬ìš©ì ì‹ ê³ ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</strong>
                <p style="margin: 0; color: #888; font-size: 13px; line-height: 1.6;">
                    ì˜¤ë²„ì›Œì¹˜ í—ˆë¸ŒëŠ” ìœ ì €ë¶„ë“¤ì˜ ì œë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìš´ì˜ë©ë‹ˆë‹¤. ë¶€ì ì ˆí•œ ìœ ì € ë°œê²¬ ì‹œ <strong>ê´€ë¦¬ì ì´ë©”ì¼(jazzhjm@gmail.com)</strong>ë¡œ í•´ë‹¹ ìœ ì €ì˜ ë°°í‹€íƒœê·¸ì™€ ì¦ê±° ìŠ¤í¬ë¦°ìƒ·ì„ ë³´ë‚´ì£¼ì„¸ìš”. ê´€ë¦¬ìê°€ í™•ì¸ í›„ ì´ìš© ì œí•œ ë“± í•„ìš”í•œ ì¡°ì¹˜ë¥¼ ì·¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>
        </div>
    </details>
</section>

     
    <!-- Footer -->
    <footer style="margin-top: 50px; padding: 20px 15px; border-top: 1px solid #222; color: #555; font-size: 11px; line-height: 1.8;">
        <div style="max-width: 800px; margin: 0 auto;">
            <div style="margin-bottom: 10px;">
                <a href="terms.html" style="color: #888; text-decoration: none; margin-right: 15px;">ì´ìš©ì•½ê´€</a>
                <a href="privacy.html" style="color: #888; text-decoration: none; font-weight: bold;">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a>
            </div>
            <p style="margin: 0;">
                <strong>ì˜¤ë²„ì›Œì¹˜ í—ˆë¸Œ (OWHUB)</strong> | ê´€ë¦¬ì ì´ë©”ì¼: <a href="mailto:jazzhjm@gmail.com" style="color: #666; text-decoration: none;">jazzhjm@gmail.com</a><br>
                ë³¸ ì„œë¹„ìŠ¤ëŠ” ì˜¤ë²„ì›Œì¹˜2 ìœ ì €ë“¤ì„ ìœ„í•œ ì‹¤ì‹œê°„ íŒŒí‹° ë§¤ì¹­ ì»¤ë®¤ë‹ˆí‹°ì…ë‹ˆë‹¤. 
                ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë°°í‹€íƒœê·¸ ì •ë³´ëŠ” íŒŒí‹° ë§¤ì¹­ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ë©°, 
                êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ ê´‘ê³ ë¥¼ í†µí•´ ìš´ì˜ë©ë‹ˆë‹¤. 
                ëª¨ë“  ê²Œì„ ë°ì´í„°ì˜ ì €ì‘ê¶Œì€ Blizzard Entertainmentì— ìˆìŠµë‹ˆë‹¤.
            </p>
            <p style="margin-top: 10px; color: #444;">
                Â© 2026 Overwatch Hub. All rights reserved.
            </p>
        </div>


    </footer>
     
    <script>
        // ========================================
        // ì‚¬ì´ë“œë°” ì „ìš© ìŠ¤í¬ë¦½íŠ¸ (ì¼ë°˜ script - ê°€ì¥ ë¨¼ì € ì‹¤í–‰)
        // ========================================
        
        // ë””ë²„ê·¸ ë¡œê·¸ í•¨ìˆ˜
// ========================================
// ì‚¬ì´ë“œë°” ì „ìš© ìŠ¤í¬ë¦½íŠ¸ (ìˆ˜ì •ë³¸)
// ========================================

// ë””ë²„ê·¸ ë¡œê·¸ í•¨ìˆ˜
window.debugLog = function(msg, type) {
    type = type || 'info';
    const output = document.getElementById('debug-output');
    if (output) {
        const time = new Date().toLocaleTimeString();
        const color = type === 'error' ? '#f00' : type === 'success' ? '#0f0' : '#0ff';
        output.innerHTML += '<div style="color: ' + color + '; margin: 2px 0;">[' + time + '] ' + msg + '</div>';
        output.scrollTop = output.scrollHeight;
    }
    console.log(msg);
};

// ì‚¬ì´ë“œë°” í† ê¸€ í•¨ìˆ˜
window.toggleSidebar = function() {
    const sidebar = document.querySelector('.sidebar');
    const overlay = document.querySelector('.sidebar-overlay');
    const hamburger = document.querySelector('.hamburger');
    
    if (sidebar && overlay && hamburger) {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
        hamburger.classList.toggle('active');
        debugLog('âœ… ì‚¬ì´ë“œë°” í† ê¸€ ì™„ë£Œ');
    } else {
        debugLog('âŒ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ', 'error');
    }
};

// í˜ì´ì§€ ì „í™˜ í•¨ìˆ˜
window.showPage = function(id) {
    debugLog('ğŸ“„ í˜ì´ì§€ ì „í™˜ ì‹œë„: ' + id);
    
    // 1. ëª¨ë“  í˜ì´ì§€ ìˆ¨ê¸°ê¸°
    const pages = document.querySelectorAll('.page');
    pages.forEach(p => p.classList.remove('active'));
    
    // 2. ëª¨ë“  ë©”ë‰´ ì•„ì´í…œ ë¹„í™œì„±í™”
    const menuItems = document.querySelectorAll('.sidebar-menu-item');
    menuItems.forEach(m => m.classList.remove('active'));
    
    // 3. ì„ íƒí•œ í˜ì´ì§€ ë° ë©”ë‰´ í™œì„±í™”
    const targetPage = document.getElementById('page-' + id);
    const targetMenu = document.getElementById('sidebar-' + id);
    
    if (targetPage) targetPage.classList.add('active');
    if (targetMenu) targetMenu.classList.add('active');
    
    // 4. ì•Œë¦¼ í˜ì´ì§€ ì²˜ë¦¬
    if (id === 'noti') {
        const sidebarTag = document.getElementById('sidebar-new-tag');
        const navBadge = document.getElementById('nav-new-badge');
        if (sidebarTag) sidebarTag.style.display = 'none';
        if (navBadge) navBadge.style.display = 'none';
        
        if (typeof window.renderNotiUI === 'function') window.renderNotiUI();
        if (typeof window.renderEvalList === 'function') window.renderEvalList();
    }
    
    debugLog('âœ… ' + id + ' í˜ì´ì§€ í™œì„±í™” ì™„ë£Œ', 'success');
};

// í˜ì´ì§€ ì „í™˜ í›„ ì‚¬ì´ë“œë°” ìë™ìœ¼ë¡œ ë‹«ê¸°
window.showPageAndClose = function(id) {
    window.showPage(id);
    window.toggleSidebar();
};

        
        debugLog('âœ… Sidebar functions ready!', 'success');
        
        // ì—ëŸ¬ í•¸ë“¤ëŸ¬
        window.addEventListener('error', function(e) {
            debugLog('ğŸ’¥ ERROR: ' + e.message, 'error');
        });
    </script>
    
    <script>
        // Config inlineìœ¼ë¡œ ë³€ê²½
        const CONFIG = {
            ADMIN_EMAIL: 'jazzhjm@gmail.com',
            TEST_ACCOUNTS: []
        };
    </script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, doc, updateDoc, getDoc, setDoc, deleteDoc, getDocs, where, writeBatch } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { 
            getAuth, onAuthStateChanged, signInWithEmailAndPassword, 
            createUserWithEmailAndPassword, signOut, sendEmailVerification,
            sendPasswordResetEmail 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = { apiKey: "AIzaSyA96CFg3o1TpD5lu-0rYMlIp16Ev8URDuw", authDomain: "ow-party-97936.firebaseapp.com", projectId: "ow-party-97936", storageBucket: "ow-party-97936.firebasestorage.app", messagingSenderId: "15782204013", appId: "1:15782204013:web:5c74ef2e603c311fc82564" };
        const app = initializeApp(firebaseConfig); const db = getFirestore(app); const auth = getAuth(app);
        const ADMIN_EMAIL = CONFIG.ADMIN_EMAIL;
        
        let currentPosts = [];
        let hiddenEvals = new Set();
        let lastMatchSnap = null;
        let mySentRequests = new Set(); 
        let targetData = null; 
        let rateTargetInfo = null;
        let currentFilter = { pos: [], tier: [] };

        debugLog('ğŸ¬ Firebase script started...');

        const ICON_URLS = {
            'íƒ±ì»¤': './img/tank.png',
            'ë”œëŸ¬': './img/dps.png',
            'ì§€ì›': './img/sup.png',
            'ë°°ì¹˜': './img/u.png',
            'ë¸Œë¡ ì¦ˆ': './img/b.webp',
            'ì‹¤ë²„': './img/s.webp',
            'ê³¨ë“œ': './img/g.webp',
            'í”Œë˜í‹°ë„˜': './img/p.webp',
            'ë‹¤ì´ì•„ëª¬ë“œ': './img/d.webp',
            'ë§ˆìŠ¤í„°': './img/m.webp',
            'ê·¸ëœë“œë§ˆìŠ¤í„°': './img/gm.webp',
            'ì±”í”¼ì–¸': './img/c.webp'
        };

        const timeSince = (date) => {
            const seconds = Math.floor((Date.now() - date) / 1000);
            if (seconds < 60) return "ë°©ê¸ˆ ì „";
            const mins = Math.floor(seconds / 60);
            return mins < 60 ? mins + "ë¶„ ì „" : Math.floor(mins / 60) + "ì‹œê°„ ì „";
        };

        const getPosBadge = (pos) => {
            const colors = { 'íƒ±ì»¤': 'var(--tank)', 'ë”œëŸ¬': 'var(--dps)', 'ì§€ì›': 'var(--sup)' };
            const iconUrl = ICON_URLS[pos] || '';
            
            return `
                <span class="badge" style="background:${colors[pos] || '#555'}; color:${pos==='ì§€ì›'?'black':'white'}; display:inline-flex; align-items:center; border-radius: 10px; padding: 3px 6px;">
                    <img src="${iconUrl}" style="width:24px; height:24px; margin-right:4px; filter:${pos==='ì§€ì›'?'brightness(0)':'none'};">
                    ${pos}
                </span>`;
        };


         // í•¨ìˆ˜ ì •ì˜ ë¶€ë¶„
const getTierBadge = (tier, tierNum) => {
    const tierColors = {
        'ë¸Œë¡ ì¦ˆ': '#8d5131', 'ì‹¤ë²„': '#a5a5a5', 'ê³¨ë“œ': '#e5b300', 
        'í”Œë˜í‹°ë„˜': '#a5c2c1', 'ë‹¤ì´ì•„ëª¬ë“œ': '#5d79ae', 'ë§ˆìŠ¤í„°': '#edb04c', 
        'ê·¸ëœë“œë§ˆìŠ¤í„°': '#ffffff', 'ì±”í”¼ì–¸': '#ff9c00', 'ë°°ì¹˜': '#444'
    };
    
    const color = tierColors[tier] || '#666';
    const textColor = (tier === 'ê·¸ëœë“œë§ˆìŠ¤í„°' || tier === 'í”Œë˜í‹°ë„˜') ? '#000' : '#fff';

    // ${tier}ì™€ ${tierNum}ì„ í•œ ê³µê°„ì— ë„£ìŒ
    return `<span style="
    display: inline-flex;       /* 1. ë‚´ìš©ë¬¼ì— ë§ì¶° í¬ê¸° ì¡°ì ˆ */
        align-items: center;
        white-space: nowrap;  
        height:32px;
        background: ${color};
        color: ${textColor};
        padding: 3px 8px;
        border-radius: 10px;
        font-size: 18px;
    ">${tier} ${tierNum || ''}</span>`; // tierNumì´ ì—†ìœ¼ë©´ ë¹ˆì¹¸ ì²˜ë¦¬
};



        window.closeModal = () => document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none');

        window.forgotPassword = async function() {
            const email = document.getElementById('login-email').value;
            if(!email) return alert("ì´ë©”ì¼ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.");
            try {
                await sendPasswordResetEmail(auth, email);
                alert("ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë©”ì¼ì„ ë³´ëƒˆìŠµë‹ˆë‹¤. ë©”ì¼í•¨ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
            } catch (e) { alert("ì˜¤ë¥˜: " + e.message); }
        };

        debugLog('âœ… Firebase functions ready', 'success');

        const loadMyProfile = async (uid) => {
    const snap = await getDoc(doc(db, "users", uid));
    const sidebarUserTag = document.getElementById('sidebar-user-tag');
    const displayBtag = document.getElementById('display-btag');

    if (snap.exists()) {
        const d = snap.data();
        const btag = d.btag || "ë‹‰ë„¤ì„#0000";
                document.getElementById('profile-btag').value = d.btag || "";
        document.getElementById('post-btag').value = d.btag || "";
        
        // ì‚¬ì´ë“œë°” ìƒë‹¨ ë°°í‹€íƒœê·¸ ì—…ë°ì´íŠ¸
        if(displayBtag) displayBtag.innerText = btag;
        if(sidebarUserTag) sidebarUserTag.style.display = 'block';
                if(d.íƒ±ì»¤) { document.getElementById('tier-tank').value = d.íƒ±ì»¤.tier; document.getElementById('num-tank').value = d.íƒ±ì»¤.num; }
                if(d.ë”œëŸ¬) { document.getElementById('tier-dps').value = d.ë”œëŸ¬.tier; document.getElementById('num-dps').value = d.ë”œëŸ¬.num; }
                if(d.ì§€ì›) { document.getElementById('tier-sup').value = d.ì§€ì›.tier; document.getElementById('num-sup').value = d.ì§€ì›.num; }
                if(d.rateCount > 0) {
                    document.getElementById('avg-rating-area').style.display = 'block';
                    document.getElementById('profile-avg-stars').innerText = `â˜… ${(d.rateTotal / d.rateCount).toFixed(1)}`;
                }
         } else {
        // ë°ì´í„°ê°€ ì—†ëŠ” ì‹ ê·œ ìœ ì €ì¼ ê²½ìš° ì²˜ë¦¬
        if(displayBtag) displayBtag.innerText = "í”„ë¡œí•„ì„ ì„¤ì •í•˜ì„¸ìš”";
        if(sidebarUserTag) sidebarUserTag.style.display = 'block';
    }
};

        window.setFilter = (type, value) => {
            currentFilter = { pos: [], tier: [] };
            document.querySelectorAll('.filter-tag').forEach(el => el.classList.remove('active'));
            
            const tags = document.querySelectorAll('.filter-tag');
            tags.forEach(tag => {
                if(tag.innerText.includes(value)) {
                    tag.classList.add('active');
                    currentFilter[type].push(value);
                }
            });
            
            updateSearchTitle();
            window.renderList();
        };

        window.toggleFilter = (type, value, element) => {
            const index = currentFilter[type].indexOf(value);
            
            if (index > -1) {
                currentFilter[type].splice(index, 1);
                element.classList.remove('active');
            } else {
                currentFilter[type].push(value);
                element.classList.add('active');
            }
            
            updateSearchTitle();
            window.renderList();
        };

        window.resetFilter = () => {
            currentFilter = { pos: [], tier: [] };
            document.querySelectorAll('.filter-tag').forEach(el => el.classList.remove('active'));
            updateSearchTitle();
            window.renderList();
        };

        const updateSearchTitle = () => {
            const title = document.getElementById('search-title');
            const { pos, tier } = currentFilter;
            
            if (pos.length === 0 && tier.length === 0) {
                title.innerText = "ê²€ìƒ‰ í•„í„°";
            } else {
                const posText = pos.length > 0 ? `[${pos.join(', ')}]` : "";
                const tierText = tier.length > 0 ? `[${tier.join(', ')}]` : "";
                title.innerText = `ğŸ” ${posText} ${tierText} í•„í„°ë§ ì¤‘`;
            }
        };

        window.renderEvalList = () => {
            const list = document.getElementById('group-eval-list');
            if(!auth.currentUser) return;
            let html = "";
            currentPosts.forEach(p => {
                if (hiddenEvals.has(p.id) || p.deleted) return;
                const isOwner = p.uid === auth.currentUser.uid;
                const isMember = p.members?.some(m => m.uid === auth.currentUser.uid);
                if (isOwner || isMember) {
                    let targets = [];
                    if(!isOwner) targets.push({uid: p.uid, btag: p.btag, pos: p.pos, tier: p.tier, tierNum: p.tierNum});
                    if(p.members) p.members.forEach(m => { if(m.uid !== auth.currentUser.uid) targets.push(m); });
                    if(targets.length > 0) {
                        let mHtml = targets.map(t => {
                            const evalKey = `eval_${auth.currentUser.uid}_to_${t.uid}`;
                            const savedScore = (p.evals && p.evals[evalKey]) ? p.evals[evalKey] : null;
                            return `<div style="display:flex; justify-content:space-between; align-items:center; padding:10px; background:#000; border-radius:8px; margin-top:5px; border:1px solid #333;">
                                <div style="font-size:12px;">${getPosBadge(t.pos)} <b>${t.btag.split('#')[0]}</b><div style="font-size:10px; color:#888;">${t.tier} ${t.tierNum || ''}</div></div>
                                <div>${savedScore ? `<span style="color:var(--accent); font-size:12px; font-weight:bold;">í‰ê°€ì™„ë£Œ (â˜…${savedScore})</span>` : `<button class="btn-sub" style="background:var(--accent); color:black;" onclick="window.openRateModal('${t.uid}', '${p.id}')">í‰ê°€</button>`}</div>
                            </div>`;
                        }).join('');
                        html += `<div class="box" id="eval-box-${p.id}" style="border:1px solid var(--accent); position:relative;">
                            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                                <div style="font-size:11px; color:var(--accent); font-weight:bold;">ğŸ¤ íŒŒí‹° ë©¤ë²„ í‰ê°€</div>
                                <button onclick="window.hideEvalBox('${p.id}')" style="background:none; border:none; color:#666; cursor:pointer; font-size:16px;">&times;</button>
                            </div>${mHtml}</div>`;
                    }
                }
            });
            list.innerHTML = html || '<div style="text-align:center; color:#444; padding:20px;">ì°¸ì—¬ ì¤‘ì¸ íŒŒí‹°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
        };

        window.hideEvalBox = (postId) => {
            if(confirm("í‰ê°€ì°½ì„ ë‹«ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?")) { hiddenEvals.add(postId); renderEvalList(); }
        };

        window.renderList = () => {
    const list = document.getElementById('party-list');
    list.innerHTML = "";
    
    // í•„í„°ë§ ë¡œì§ ê±°ì¹œ posts ì‚¬ìš©
    const filtered = currentPosts.filter(p => {
        if (p.deleted) return false;
        const posMatch = currentFilter.pos.length === 0 || currentFilter.pos.includes(p.pos);
        const tierMatch = currentFilter.tier.length === 0 || currentFilter.tier.includes(p.tier);
        return posMatch && tierMatch;
    });

    if (filtered.length === 0) {
        list.innerHTML = '<div style="text-align:center; color:#444; padding:40px;">ì¡°ê±´ì— ë§ëŠ” íŒŒí‹°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
        return;
    }

    filtered.forEach(p => {
        const isMine = auth.currentUser && p.uid === auth.currentUser.uid;
        const isAdmin = auth.currentUser && (auth.currentUser.email === ADMIN_EMAIL || (CONFIG.TEST_ACCOUNTS && CONFIG.TEST_ACCOUNTS.some(acc => acc.email === auth.currentUser.email)));
        const isFull = (p.members ? p.members.length + 1 : 1) >= (p.maxp || 5);
        const isSent = auth.currentUser && p.requests && p.requests[auth.currentUser.uid];
        const rateText = p.ownerRate ? `â˜… ${p.ownerRate}` : `â˜… ì‹ ê·œ`;

        // ë²„íŠ¼ ì •ì˜
        let btn = `<button class="btn-sub" style="background:var(--accent); color:black; font-weight:bold;" onclick="openRequestModal('${p.uid}','${p.btag}','${p.id}')">ì‹ ì²­</button>`;
        if (isMine || isAdmin) btn = `<button class="btn-danger" onclick="delPost('${p.id}')">${isAdmin && !isMine ? "ì‚­ì œ" : "ì¢…ë£Œ"}</button>`;
        else if (isSent) btn = `<button class="btn-sub" style="background:#444; color:#888; cursor:default;" disabled>ì‹ ì²­ë¨</button>`;
        else if (isFull) btn = `<button class="btn-sub" style="opacity:0.5;" disabled>ë§ˆê°</button>`;

        // ì¹´ë“œ ìƒì„±
        let html = `
        <div class="box" style="padding: 15px; margin-bottom: 12px; border: 1px solid #222;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                <div style="display:flex; align-items:center; gap:8px;">
                    <b style="font-size:15px; color:#fff;">${p.btag ? p.btag.split('#')[0] : 'ìµëª…'}</b>
                    <span style="color:var(--accent); font-size:11px; font-weight:bold;">${rateText}</span>
                    <small style="color:#555; font-size:11px;">${timeSince(p.createdAt)}</small>
                </div>
                ${btn}
            </div>

            <div style="margin-bottom:15px; color:#bbb; font-size:14px; min-height:18px;">
                ${p.desc || 'ë‚´ìš© ì—†ìŒ'}
            </div>

            <div style="display:flex; align-items:center; flex-wrap: wrap; gap: 4px;">
                <span class="badge-item ${p.pos === 'íƒ±ì»¤' ? 'badge-tank' : p.pos === 'ë”œëŸ¬' ? 'badge-dps' : 'badge-sup'}">
                    <img src="${ICON_URLS[p.pos]}" style="width:14px; height:14px; margin-right:4px; filter:${p.pos==='ì§€ì›'?'brightness(0)':'none'};">
                    ${p.pos}
                </span>

                <span class="badge-item badge-tier">
                    <img src="${ICON_URLS[p.tier]}" style="width:16px; height:16px; margin-right:4px;">
                    ${p.tier} ${p.tierNum || ''}
                </span>

                <span class="badge-item badge-count">
                    <i class="fas fa-users" style="margin-right:5px; font-size:10px;"></i>
                    ${p.members ? p.members.length + 1 : 1} / ${p.maxp || 5}ëª…
                </span>
            </div>
        </div>`;
        list.innerHTML += html;
    });
};


        const renderNotiUI = () => {
            const list = document.getElementById('noti-list');
            if(!list || !lastMatchSnap || !auth.currentUser) return; 
            let html = "";
            lastMatchSnap.docs.forEach(ds => {
                const m = ds.data();
                if (m.fromUid === auth.currentUser.uid || m.toUid === auth.currentUser.uid) {
    const isToMe = m.toUid === auth.currentUser.uid;

    if (m.status === 'pending') {
        if (isToMe) {
            // [1. ë‚˜ì—ê²Œ ì˜¨ ì‹ ì²­]
            html += `
            <div class="box" style="border-left:5px solid var(--accent); border-radius:15px; padding:15px; margin-bottom:10px;">
                <div style="font-size:11px; color:var(--accent); margin-bottom:8px; font-weight:bold;">ë‚´ íŒŒí‹°ì— ì‹ ì²­í•¨</div>
                <b style="font-size:15px;">${m.fromBtag}</b> ì‹ ì²­ ë„ì°©!<br>
                <div style="margin:8px 0; display:flex; align-items:center; gap:5px;">
                    ${getPosBadge(m.reqPos)} 
                    ${getTierBadge(m.reqTier, m.reqTierNum)}
                </div>
                <small style="display:block; margin:10px 0; color:#ccc; line-height:1.4;">"${m.message || 'ë©”ì‹œì§€ ì—†ìŒ'}"</small>
                <div style="display:flex; gap:8px; margin-top:12px;">
                    <button class="btn-main" style="margin:0; flex:1; border-radius:10px; height:36px;" onclick="acceptMatch('${ds.id}')">ìˆ˜ë½</button>
                    <button class="btn-danger" style="flex:1; border-radius:10px; height:36px;" onclick="delMatch('${ds.id}')">ê±°ì ˆ</button>
                </div>
            </div>`;
        } else {
            // [2. ë‚´ê°€ ë³´ë‚¸ ì‹ ì²­]
            html += `
            <div class="box" style="border-left:5px solid #555; border-radius:15px; padding:15px; margin-bottom:10px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                    <div>
                        <div style="font-size:11px; color:#888; margin-bottom:3px;">íŒŒí‹°ì¥ ì •ë³´</div>
                        <div style="display:flex; align-items:center; gap:5px;">
                            <b style="font-size:14px;">${m.toBtag.split('#')[0]}</b>ë‹˜ 
                            ${getPosBadge(m.leaderPos || 'ì •ë³´ì—†ìŒ')}
                            ${getTierBadge(m.leaderTier, m.leaderTierNum || '')}
                        </div>
                    </div>
                    <button class="btn-sub" style="font-size:10px; background:#444; border-radius:6px; padding:4px 8px;" onclick="delMatch('${ds.id}')">ì·¨ì†Œ</button>
                </div>
                <div style="background:rgba(0,0,0,0.4); padding:10px; border-radius:10px; border:1px solid #333;">
                    <div style="font-size:10px; color:#666; margin-bottom:6px;">ë‚´ ì‹ ì²­ ì¡°ê±´</div>
                    <div style="display:flex; align-items:center; gap:5px;">
                        ${getPosBadge(m.reqPos)} 
                        ${getTierBadge(m.reqTier, m.reqTierNum)}
                    </div>
                    <div style="font-size:11px; color:#888; margin-top:8px; border-top:1px solid #222; padding-top:8px;">
                        "${m.message || 'ë©”ì‹œì§€ ì—†ìŒ'}"
                    </div>
                </div>
                <div style="font-size:10px; color:var(--accent); margin-top:10px; text-align:right; font-weight:bold;">âŒ› ìˆ˜ë½ ëŒ€ê¸° ì¤‘</div>
            </div>`;
        }
    } else {
        // [3. ë§¤ì¹­ ì„±ê³µ ìƒíƒœ] (Pendingì´ ì•„ë‹ ë•Œ)
        html += `
        <div class="box" style="border-left:5px solid var(--sup); border-radius:12px; padding:15px; margin-bottom:10px;">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span style="font-size:13px; color:#eee;">
                    âœ… <b>${isToMe ? m.fromBtag.split('#')[0] : m.toBtag.split('#')[0]}</b>ë‹˜ê³¼ ë§¤ì¹­ ì„±ê³µ!
                </span>
                <button class="btn-sub" style="font-size:11px; background:#444; border-radius:6px; padding:5px 12px;" onclick="delMatch('${ds.id}')">í™•ì¸</button>
            </div>
        </div>`;
    }
}

            });
            list.innerHTML = html || '<div style="text-align:center; color:#444; padding:20px;">ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
        };
        window.renderNotiUI = renderNotiUI;

        onAuthStateChanged(auth, async (user) => {
            const loginForm = document.getElementById('login-form-sidebar');
            const userInfo = document.getElementById('user-info-sidebar');
            const sidebarUserTag = document.getElementById('sidebar-user-tag'); // ì¶”ê°€

            if (user) {
                const isSpecialAccount = (user.email === ADMIN_EMAIL) || (CONFIG.TEST_ACCOUNTS && CONFIG.TEST_ACCOUNTS.some(acc => acc.email.toLowerCase() === user.email.toLowerCase()));
                if (!isSpecialAccount && !user.emailVerified) {
                    loginForm.style.display = 'block'; userInfo.style.display = 'none';
                    return; 
                }
                loginForm.style.display = 'none'; userInfo.style.display = 'block';
                loadMyProfile(user.uid);

                // ê¸°ì¡´ matches ìŠ¤ëƒ…ìƒ· ë¦¬ìŠ¤ë„ˆ ë¶€ë¶„ì„ ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ êµì²´
onSnapshot(query(collection(db, "matches"), orderBy("createdAt", "desc")), (snap) => {
    lastMatchSnap = snap;
    const newSentSet = new Set();
    
    // 1. ë‚´ê°€ ë³´ë‚¸ ì‹ ì²­ ë°ì´í„° ì—…ë°ì´íŠ¸
    if (auth.currentUser) {
        snap.docs.forEach(doc => { 
            if (doc.data().fromUid === auth.currentUser.uid) newSentSet.add(doc.data().postId); 
        });
    }
    mySentRequests = newSentSet;

    // 2. ë‚˜ì—ê²Œ ì˜¨ ìƒˆë¡œìš´ 'pending' ì‹ ì²­ì´ ìˆëŠ”ì§€ í™•ì¸
    const hasNew = auth.currentUser ? snap.docs.some(d => d.data().toUid === auth.currentUser.uid && d.data().status === 'pending') : false;
    
    // 3. ì‚¬ì´ë“œë°” ë‚´ë¶€ "N" íƒœê·¸ ì œì–´
    const sidebarTag = document.getElementById('sidebar-new-tag');
    if(sidebarTag) {
        sidebarTag.style.display = hasNew ? 'inline-block' : 'none';
    }

    // 4. ì™¸ë¶€ í–„ë²„ê±° ë²„íŠ¼ ë¹¨ê°„ ë°°ì§€ ì œì–´
    const navBadge = document.getElementById('nav-new-badge');
    if(navBadge) {
        navBadge.style.display = hasNew ? 'block' : 'none';
    }

    renderList(); 
    renderNotiUI(); 
});

            } else {
                 loginForm.style.display = 'block'; 
             userInfo.style.display = 'none';
             if(sidebarUserTag) sidebarUserTag.style.display = 'none'; // ë°°í‹€íƒœê·¸ ìˆ¨ê¹€
             mySentRequests = new Set(); 
             lastMatchSnap = null;
            }

            onSnapshot(query(collection(db, "parties"), orderBy("createdAt", "desc")), (snap) => {
                currentPosts = snap.docs.map(d => ({id: d.id, ...d.data()}));
                const activeParties = currentPosts.filter(p => !p.deleted).length;
                const partyEl = document.getElementById('live-party-count');
                if (partyEl) {
                    partyEl.innerText = `ëª¨ì§‘ ì¤‘ì¸ íŒŒí‹°: ${activeParties}`;
                } 
                renderList(); renderEvalList();
            });
        });

        document.getElementById('btn-login').onclick = async () => {
            const e = document.getElementById('login-email').value.trim(); 
            const p = document.getElementById('login-password').value.trim();
            if(!e || !p) return alert("ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");

            const isSpecialAccount = (e === ADMIN_EMAIL) || (CONFIG.TEST_ACCOUNTS && CONFIG.TEST_ACCOUNTS.some(acc => acc.email.toLowerCase() === e.toLowerCase()));

            try {
            
                const userCredential = await signInWithEmailAndPassword(auth, e, p);
                const user = userCredential.user;

                if (!isSpecialAccount && !user.emailVerified) {
                    alert("ì´ë©”ì¼ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤! ë©”ì¼í•¨ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
                    await sendEmailVerification(user); 
                    await signOut(auth);
                } else { 
                    alert(isSpecialAccount ? "ê´€ë¦¬ì/í…ŒìŠ¤íŠ¸ ê³„ì • ì ‘ì† ì„±ê³µ!" : "í™˜ì˜í•©ë‹ˆë‹¤!");
                    if (window.toggleSidebar) window.toggleSidebar(); // ë¡œê·¸ì¸ í›„ ì‚¬ì´ë“œë°” ë‹«ê¸°
                }
            } catch (err) {
                if (err.code === 'auth/user-not-found' || err.code === 'auth/invalid-credential' || err.code === 'auth/invalid-login-credentials') {
                    try {
                        const newUserCredential = await createUserWithEmailAndPassword(auth, e, p);
                        
                        if (isSpecialAccount) {
                            alert("ê´€ë¦¬ì/í…ŒìŠ¤íŠ¸ ê³„ì • ê°€ì… ë° ë¡œê·¸ì¸ ì„±ê³µ!");
                            location.reload();
                        } else {
                            await sendEmailVerification(newUserCredential.user);
                            alert("ğŸ‰ ê°€ì… ì„±ê³µ!\n\n" + 
                                  "ì…ë ¥í•˜ì‹  ë©”ì¼ë¡œ ì¸ì¦ ë§í¬ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.\n" +
                                  "ë©”ì¼ì´ ë³´ì´ì§€ ì•Šìœ¼ë©´ ë°˜ë“œì‹œ 'ìŠ¤íŒ¸ ë©”ì¼í•¨'ì„ í™•ì¸í•´ ì£¼ì„¸ìš”!\n" +
                                  "ì¸ì¦ ì™„ë£Œ í›„ ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."); 
                            await signOut(auth);
                        }
                    } catch (ce) { alert("ê°€ì… ì˜¤ë¥˜: " + ce.message); }
                } else { alert("ë¡œê·¸ì¸ ì˜¤ë¥˜: " + err.message); }
            }
        };

        document.getElementById('btn-logout').onclick = () => signOut(auth).then(() => location.reload());

        document.getElementById('btn-post').onclick = async () => {
            if(!auth.currentUser) return alert("ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.");

            const btagInput = document.getElementById('post-btag').value.trim();
            if (!btagInput || !btagInput.includes('#')) {
                alert("ì •í™•í•œ ë°°í‹€íƒœê·¸(ì˜ˆ: ë‹‰ë„¤ì„#1234)ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                document.getElementById('post-btag').focus();
                return;
            }

            try {
                const q = query(
                    collection(db, "parties"), 
                    where("uid", "==", auth.currentUser.uid), 
                    where("deleted", "==", false)
                );
                const querySnapshot = await getDocs(q);

                if (!querySnapshot.empty) {
                    if (confirm("ì´ë¯¸ ëª¨ì§‘ ì¤‘ì¸ íŒŒí‹°ê¸€ì´ ìˆìŠµë‹ˆë‹¤.\nê¸°ì¡´ ê¸€ì„ ì¢…ë£Œí•˜ê³  ìƒˆë¡œìš´ ê¸€ì„ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                        const batch = writeBatch(db);
                        querySnapshot.forEach((oldDoc) => {
                            batch.update(oldDoc.ref, { deleted: true });
                        });
                        await batch.commit();
                    } else {
                        return;
                    }
                }

                const userSnap = await getDoc(doc(db, "users", auth.currentUser.uid));
                let ownerRate = (userSnap.exists() && userSnap.data().rateCount > 0) 
                    ? (userSnap.data().rateTotal / userSnap.data().rateCount).toFixed(1) 
                    : "ì‹ ê·œ";
                
                await addDoc(collection(db, "parties"), {
                    btag: btagInput,
                    uid: auth.currentUser.uid, 
                    ownerRate: ownerRate,
                    pos: document.getElementById('post-main-pos').value, 
                    tier: document.getElementById('post-tier').value,
                    tierNum: document.getElementById('post-tier-num').value, 
                    maxp: parseInt(document.getElementById('post-maxp').value),
                    desc: document.getElementById('post-desc').value, 
                    createdAt: Date.now(), 
                    members: [], 
                    deleted: false
                });

                alert("ìƒˆë¡œìš´ íŒŒí‹° ëª¨ì§‘ì„ ì‹œì‘í–ˆìŠµë‹ˆë‹¤!");
                document.getElementById('post-desc').value = "";
            } catch (error) {
                console.error("Error:", error);
                alert("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + error.message);
            }
        };

        window.openRequestModal = (uid, btag, postId) => {
            if (!auth.currentUser) {
                alert("ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.");
                return;
            }
            if (uid === auth.currentUser.uid) return alert("ìì‹ ì˜ íŒŒí‹°ì—ëŠ” ì‹ ì²­í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            targetData = {uid, btag, postId}; 

            const mySavedBtag = document.getElementById('profile-btag').value;
            document.getElementById('request-btag').value = mySavedBtag || "";    
            document.getElementById('request-modal').style.display = 'flex';
        };

        document.getElementById('btn-confirm-send').onclick = async () => {
            if(!auth.currentUser || !targetData) return;

            const reqBtag = document.getElementById('request-btag').value.trim();
            if (!reqBtag || !reqBtag.includes('#')) {
                alert("ì •í™•í•œ ë°°í‹€íƒœê·¸(ì˜ˆ: ë‹‰ë„¤ì„#1234)ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                document.getElementById('request-btag').focus();
                return;
            }

            const parentPost = currentPosts.find(p => p.id === targetData.postId);
            await addDoc(collection(db, "matches"), {
                fromUid: auth.currentUser.uid, 
                fromBtag: reqBtag,
                reqPos: document.getElementById('request-pos').value, 
                reqTier: document.getElementById('request-tier').value,
                reqTierNum: document.getElementById('request-tier-num').value, 
                toUid: targetData.uid, 
                toBtag: targetData.btag,
                leaderPos: parentPost?.pos || "ì •ë³´ì—†ìŒ", 
                leaderTier: parentPost?.tier || "", 
                leaderTierNum: parentPost?.tierNum || "",
                postId: targetData.postId, 
                message: document.getElementById('request-msg').value, 
                status: "pending", 
                createdAt: Date.now()
            });
            alert("ì‹ ì²­ì™„ë£Œ"); 
            closeModal();
        };

        window.acceptMatch = async (id) => {
            const mRef = doc(db, "matches", id); const m = (await getDoc(mRef)).data();
            await updateDoc(mRef, { status: 'accepted' });
            const pRef = doc(db, "parties", m.postId); const p = (await getDoc(pRef)).data();
            const members = p.members || [];
            members.push({uid: m.fromUid, btag: m.fromBtag, pos: m.reqPos, tier: m.reqTier, tierNum: m.reqTierNum});
            await updateDoc(pRef, { members });
        };

        window.openRateModal = (uid, postId) => {
            rateTargetInfo = { uid, postId }; 
            document.querySelectorAll('#rate-stars span').forEach(s => s.classList.remove('active'));
            document.getElementById('rate-modal').style.display = 'flex';
        };

        document.getElementById('btn-confirm-rate').onclick = async () => {
            const score = document.querySelectorAll('#rate-stars span.active').length;
            if(score === 0 || !rateTargetInfo) return alert("ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
            try {
                const uRef = doc(db, "users", rateTargetInfo.uid); const uSnap = await getDoc(uRef);
                let count = uSnap.exists() ? (uSnap.data().rateCount || 0) : 0;
                let total = uSnap.exists() ? (uSnap.data().rateTotal || 0) : 0;
                await setDoc(uRef, { rateCount: count + 1, rateTotal: total + score }, { merge: true });
                await setDoc(doc(db, "parties", rateTargetInfo.postId), { evals: { [`eval_${auth.currentUser.uid}_to_${rateTargetInfo.uid}`]: score } }, { merge: true });
                alert("í‰ê°€ ì™„ë£Œ!"); closeModal();
            } catch (err) { alert("í‰ê°€ ì˜¤ë¥˜!"); }
        };

        document.getElementById('btn-save-profile').onclick = async () => {
            const data = {
                btag: document.getElementById('profile-btag').value,
                "íƒ±ì»¤": { tier: document.getElementById('tier-tank').value, num: document.getElementById('num-tank').value },
                "ë”œëŸ¬": { tier: document.getElementById('tier-dps').value, num: document.getElementById('num-dps').value },
                "ì§€ì›": { tier: document.getElementById('tier-sup').value, num: document.getElementById('num-sup').value }
            };
            await setDoc(doc(db, "users", auth.currentUser.uid), data, {merge:true});
            alert("í”„ë¡œí•„ ì €ì¥ ì™„ë£Œ!");
        };

        window.delPost = async (id) => { if(confirm("ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) await updateDoc(doc(db, "parties", id), {deleted:true}); };
        window.delMatch = async (id) => { await deleteDoc(doc(db, "matches", id)); };

        document.querySelectorAll('#rate-stars span').forEach(s => {
            s.onclick = () => {
                const v = s.dataset.v;
                document.querySelectorAll('#rate-stars span').forEach(i => i.classList.toggle('active', i.dataset.v <= v));
            };
        });

        const updateUserPresence = async () => {
            let guestId = localStorage.getItem('guest_id');
            if (!guestId) {
                guestId = 'guest_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('guest_id', guestId);
            }
            
            const id = auth.currentUser ? auth.currentUser.uid : guestId;
            
            try {
                await setDoc(doc(db, "presences", id), {
                    lastSeen: Date.now(),
                    isGuest: !auth.currentUser
                }, { merge: true });
            } catch (e) { console.error("Presence error:", e); }
        };

        updateUserPresence();
        setInterval(updateUserPresence, 4 * 60 * 1000);

        onSnapshot(collection(db, "presences"), (snap) => {
            const now = Date.now();
            const activeTimeThreshold = 5 * 60 * 1000;
            let actualOnlineCount = 0;

            snap.docs.forEach(doc => {
                if (now - doc.data().lastSeen < activeTimeThreshold) {
                    actualOnlineCount++;
                }
            });

            const safePosts = currentPosts || [];
            const partyCount = safePosts.filter(p => !p.deleted).length;
            
            const minUsers = 3; 
            const finalDisplayCount = actualOnlineCount + minUsers + (partyCount * 2);

            const countEl = document.getElementById('live-user-count');
            if(countEl) countEl.innerText = `${finalDisplayCount}ëª… ì ‘ì† ì¤‘`;
            
            const partyEl = document.getElementById('live-party-count');
            if(partyEl) partyEl.innerText = `ëª¨ì§‘ ì¤‘ì¸ íŒŒí‹°: ${partyCount}`;
        });
    </script>
</body>
</html>
