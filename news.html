<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overwatch 2 Pro Feed</title>
    <style>
        :root {
            --ow-orange: #f06414;
            --ow-blue: #00aeff;
            --ow-bg: #12161d;
            --card-bg: #1e242d;
        }

        body {
            background-color: var(--ow-bg);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0; padding: 0;
        }

        header {
            background: #000;
            padding: 30px;
            text-align: center;
            border-bottom: 3px solid var(--ow-orange);
        }

        /* 탭 스타일 */
        .tabs {
            display: flex;
            justify-content: center;
            background: #282e3e;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .tab-btn {
            padding: 15px 25px;
            border: none;
            background: none;
            color: white;
            font-weight: bold;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            color: var(--ow-orange);
            border-bottom: 3px solid var(--ow-orange);
        }

        /* 영상 그리드 - 여기서 여러 개가 보임 */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .video-card {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            transition: 0.3s;
            cursor: pointer;
        }

        .video-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        .thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            background-size: cover;
            background-position: center;
        }

        .info {
            padding: 15px;
        }

        .player-name {
            color: var(--ow-blue);
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .title {
            font-size: 0.95rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>
<body>

<header>
    <h1>OW STRATEGY FEED</h1>
    <div id="last-update" style="font-size: 0.8rem; color: #888;"></div>
</header>

<div class="tabs">
    <button class="tab-btn active" onclick="showTab('pro')">PRO</button>
    <button class="tab-btn" onclick="showTab('streamer')">STREAMER</button>
    <button class="tab-btn" onclick="showTab('official')">OFFICIAL</button>
    <button class="tab-btn" onclick="showTab('trending')">TRENDING</button>
</div>

<div id="video-grid" class="video-grid">
    </div>

<script>
    let globalData = null;

    async function init() {
        try {
            // 봇이 만든 최신 news.json을 가져옵니다.
            const res = await fetch('news.json?t=' + new Date().getTime()); // 캐시 방지
            globalData = await res.json();
            
            document.getElementById('last-update').innerText = "Last Updated: " + globalData.lastUpdated;
            showTab('pro'); // 처음엔 프로 탭 보여주기
        } catch (e) {
            console.error("데이터 로딩 실패", e);
        }
    }

    function showTab(category) {
        // 버튼 활성화 처리
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
            if(btn.innerText.toLowerCase() === category) btn.classList.add('active');
        });

        const grid = document.getElementById('video-grid');
        grid.innerHTML = ""; // 기존 내용을 싹 비웁니다.

        const videos = globalData[category];

        // [중요] 데이터가 여러 개라면 반복문(forEach)을 통해 전부 생성합니다.
        if (videos && videos.length > 0) {
            videos.forEach(video => {
                const card = document.createElement('div');
                card.className = 'video-card';
                card.onclick = () => window.open(`https://www.youtube.com/watch?v=${video.id}`, '_blank');
                
                card.innerHTML = `
                    <div class="thumbnail" style="background-image: url('https://img.youtube.com/vi/${video.id}/mqdefault.jpg')"></div>
                    <div class="info">
                        <div class="player-name">${video.player}</div>
                        <div class="title">${video.title}</div>
                    </div>
                `;
                grid.appendChild(card);
            });
        } else {
            grid.innerHTML = "<p style='grid-column: 1/-1; text-align: center;'>영상이 없습니다.</p>";
        }
    }

    init();
</script>
</body>
</html>
