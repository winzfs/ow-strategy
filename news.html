<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OWHUB - ì‘ì „ ë¸Œë¦¬í•‘</title>
    <style>
        :root { --accent: #ff9c00; --bg: #0f1014; --card: #1e2026; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; padding-bottom: 80px; }
        nav { background: #000; padding: 15px; border-bottom: 2px solid var(--accent); font-weight: 900; color: var(--accent); }
        .container { max-width: 700px; margin: 0 auto; padding: 20px; }
        
        /* ë‰´ìŠ¤ ì¹´ë“œ */
        .news-item { 
            background: var(--card); border-radius: 10px; margin-bottom: 20px; 
            text-decoration: none; color: white; display: block; overflow: hidden;
            border: 1px solid #333; transition: 0.2s;
        }
        .news-item:hover { border-color: var(--accent); transform: scale(1.02); }
        .news-img { width: 100%; height: 180px; background-size: cover; background-position: center; background-color: #333; }
        .news-text { padding: 15px; }
        .news-title { font-size: 17px; font-weight: bold; margin-bottom: 8px; line-height: 1.4; }
        .news-date { font-size: 12px; color: #888; }

        .status-msg { text-align: center; padding: 50px; color: #666; }
        .retry-btn { background: var(--accent); border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: 15px; }
    </style>
</head>
<body>

<nav onclick="location.href='index.html'">OVERWATCH HUB</nav>

<div class="container">
    <h2 style="margin-top:0;">ğŸ›°ï¸ ì‹¤ì‹œê°„ ë‰´ìŠ¤ í”¼ë“œ</h2>
    <div id="feed-display">
        <div class="status-msg">ë°ì´í„° ìˆ˜ì‹  í„°ë¯¸ë„ ì ‘ì† ì¤‘...</div>
    </div>
</div>

<script>
    async function loadNews() {
        const display = document.getElementById('feed-display');
        const RSS_URL = 'https://overwatch.blizzard.com/ko-kr/news/rss';
        
        // ê°€ì¥ ê°•ë ¥í•œ í”„ë¡ì‹œ ì„œë²„ ì‚¬ìš©
        const PROXY_URL = `https://api.allorigins.win/get?url=${encodeURIComponent(RSS_URL)}`;

        try {
            console.log("ë‰´ìŠ¤ ìˆ˜ì‹  ì‹œë„...");
            const response = await fetch(PROXY_URL);
            if (!response.ok) throw new Error("ë„¤íŠ¸ì›Œí¬ ì‘ë‹µ ì—†ìŒ");
            
            const data = await response.json();
            const parser = new DOMParser();
            // XMLë¡œ íŒŒì‹±
            const xmlDoc = parser.parseFromString(data.contents, "text/xml");
            const items = xmlDoc.querySelectorAll("item");

            if (items.length === 0) throw new Error("ë°ì´í„° í•­ëª© ì—†ìŒ");

            let html = "";
            items.forEach((item, index) => {
                if(index > 10) return; // 10ê°œë§Œ í‘œì‹œ

                const title = item.querySelector("title").textContent;
                const link = item.querySelector("link").textContent;
                const pubDate = new Date(item.querySelector("pubDate").textContent).toLocaleDateString();
                
                // ì´ë¯¸ì§€ ì¶”ì¶œ ì‹œë„ (ì—†ìœ¼ë©´ ê¸°ë³¸ ì˜¤ë²„ì›Œì¹˜ ë¡œê³ )
                let img = "https://images.blz-contentstack.com/v3/assets/blt088898833056f9f1/blt674258169e5d4408/628670868f08a1496a793a38/Overwatch2_ReleaseDate_Thumbnail.jpg";
                const content = item.querySelector("description")?.textContent || "";
                const imgMatch = content.match(/src="([^"]+)"/);
                if (imgMatch) img = imgMatch[1];

                html += `
                    <a href="${link}" target="_blank" class="news-item">
                        <div class="news-img" style="background-image: url('${img}')"></div>
                        <div class="news-text">
                            <div class="news-title">${title}</div>
                            <div class="news-date">${pubDate}</div>
                        </div>
                    </a>
                `;
            });
            display.innerHTML = html;
            console.log("ë‰´ìŠ¤ ìˆ˜ì‹  ì„±ê³µ!");

        } catch (error) {
            console.error("ë‰´ìŠ¤ ë¡œë“œ ì‹¤íŒ¨:", error);
            display.innerHTML = `
                <div class="status-msg">
                    <p>ğŸ“¡ ì‹ í˜¸ê°€ ì•½í•©ë‹ˆë‹¤. (ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŒ)</p>
                    <button class="retry-btn" onclick="location.reload()">ë‹¤ì‹œ ì‹œë„</button>
                    <p style="font-size:12px; margin-top:10px;">
                        <a href="https://overwatch.blizzard.com/ko-kr/news/" target="_blank" style="color:#888;">ê³µì‹ í™ˆí˜ì´ì§€ ì§ì ‘ ê°€ê¸°</a>
                    </p>
                </div>
            `;
        }
    }

    window.onload = loadNews;
</script>

</body>
</html>
