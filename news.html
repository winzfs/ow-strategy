<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OWHUB - ì „ìˆ  ë¹„ë””ì˜¤ ë°ì´í„°ë² ì´ìŠ¤</title>
    <style>
        :root { --accent: #ff9c00; --bg: #0a0a0b; --card: #161618; --text-dim: #888; }
        body { background: var(--bg); color: white; font-family: 'Pretendard', sans-serif; margin: 0; padding-bottom: 50px; }
        
        nav { background: #000; padding: 15px; border-bottom: 2px solid var(--accent); position: sticky; top: 0; z-index: 1000; }
        .logo { font-size: 20px; font-weight: 900; color: var(--accent); text-decoration: none; cursor: pointer; }

        .container { max-width: 1100px; margin: 0 auto; padding: 20px; }

        /* íƒ­ ë””ìì¸ */
        .tab-menu { display: flex; gap: 5px; margin-bottom: 25px; background: #000; padding: 5px; border-radius: 10px; border: 1px solid #222; }
        .tab-btn { 
            flex: 1; background: none; border: none; color: var(--text-dim); font-size: 14px; font-weight: bold; 
            padding: 12px; cursor: pointer; transition: 0.3s; border-radius: 8px;
        }
        .tab-btn.active { background: var(--accent); color: #000; }

        /* ë¹„ë””ì˜¤ ê·¸ë¦¬ë“œ */
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .v-card { background: var(--card); border-radius: 12px; overflow: hidden; border: 1px solid #222; transition: 0.3s; cursor: pointer; }
        .v-card:hover { border-color: var(--accent); transform: translateY(-5px); }
        
        .thumb { width: 100%; aspect-ratio: 16/9; background-size: cover; background-position: center; position: relative; }
        .thumb::after { content: "â–¶"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 40px; color: rgba(255,255,255,0.7); opacity: 0; transition: 0.3s; }
        .v-card:hover .thumb::after { opacity: 1; }

        .info { padding: 15px; }
        .v-title { font-size: 15px; font-weight: bold; line-height: 1.4; height: 2.8em; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; margin-bottom: 10px; }
        .v-meta { display: flex; justify-content: space-between; font-size: 12px; color: var(--text-dim); }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .loader { text-align: center; padding: 50px; font-size: 14px; color: var(--accent); }

        /* ëª¨ë‹¬ì°½ */
        #modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:2000; justify-content:center; align-items:center; }
        .modal-body { width: 90%; max-width: 900px; aspect-ratio: 16/9; position: relative; }
        .close-modal { position: absolute; top: -40px; right: 0; color: white; font-size: 30px; cursor: pointer; }
    </style>
</head>
<body>

<nav><a href="index.html" class="logo">OVERWATCH HUB</a></nav>

<div class="container">
    <div class="tab-menu">
        <button class="tab-btn active" onclick="changeTab(this, 'official')">ğŸ“¡ ê³µì‹ ë¸Œë¦¬í•‘</button>
        <button class="tab-btn" onclick="changeTab(this, 'viewCount')">ğŸ”¥ ì¸ê¸° ì˜ìƒ</button>
        <button class="tab-btn" onclick="changeTab(this, 'date')">ğŸ†• ìµœì‹  íŒ & ì •ë³´</button>
    </div>

    <div id="video-display" class="video-grid">
        <div class="loader">ë°ì´í„° ìˆ˜ì‹  ì¤‘...</div>
    </div>
</div>

<div id="modal" onclick="closeVideo()">
    <div class="modal-body">
        <span class="close-modal">&times;</span>
        <div id="player" style="width:100%; height:100%;"></div>
    </div>
</div>

<script>
    const API_KEY = 'AIzaSyDGOlUJZ4jNatx0omTHruKoKrDMHWJG0Tc';
    let currentTab = 'official';

    // íƒ­ë³„ ê²€ìƒ‰ ì¡°ê±´ ì„¤ì •
    const tabConfigs = {
        'official': { q: 'ì˜¤ë²„ì›Œì¹˜2 ê³µì‹', order: 'date' },
        'viewCount': { q: 'ì˜¤ë²„ì›Œì¹˜2 ì¸ê¸°', order: 'viewCount' },
        'date': { q: 'ì˜¤ë²„ì›Œì¹˜2 íŒ ê°•ì˜ ê°€ì´ë“œ', order: 'date' }
    };

    async function loadVideos(tab) {
        const display = document.getElementById('video-display');
        display.innerHTML = '<div class="loader">ì‹ í˜¸ ì¦í­ ì¤‘...</div>';
        
        const config = tabConfigs[tab];
        const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=9&q=${encodeURIComponent(config.q)}&order=${config.order}&type=video&key=${API_KEY}`;

        try {
            const res = await fetch(url);
            const data = await res.json();

            if (!data.items) throw new Error();

            let html = "";
            data.items.forEach(item => {
                const vid = item.id.videoId;
                const title = item.snippet.title;
                const thumb = item.snippet.thumbnails.high.url;
                const channel = item.snippet.channelTitle;

                html += `
                    <div class="v-card" onclick="playVideo('${vid}')">
                        <div class="thumb" style="background-image: url('${thumb}')"></div>
                        <div class="info">
                            <div class="v-title">${title}</div>
                            <div class="v-meta">
                                <span>${channel}</span>
                                <span>ìƒì„¸ ë³´ê¸°</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            display.innerHTML = html;
        } catch (e) {
            display.innerHTML = '<div class="loader">ë°ì´í„° í• ë‹¹ëŸ‰ ì´ˆê³¼ ë˜ëŠ” í†µì‹  ì˜¤ë¥˜ì…ë‹ˆë‹¤.</div>';
        }
    }

    function changeTab(btn, tab) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        loadVideos(tab);
    }

    function playVideo(id) {
        document.getElementById('modal').style.display = 'flex';
        document.getElementById('player').innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${id}?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
    }

    function closeVideo() {
        document.getElementById('modal').style.display = 'none';
        document.getElementById('player').innerHTML = '';
    }

    // ì´ˆê¸° ì‹¤í–‰
    window.onload = () => loadVideos('official');
</script>

</body>
</html>
